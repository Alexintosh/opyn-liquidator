{"version":3,"sources":["utils/web3.js","utils/blockNative.js","utils/infura.js","constants/contracts.js","components/NavBar/ConnectButton.js","components/NavBar/SettingsButton.js","components/NavBar/index.js","components/HomePage/index.js","components/common/AddressBlock.js","components/common/BalanceBlock.js","components/common/RatioTag.js","components/common/SectionTitle.js","components/common/MaxButton.js","components/common/HelpText.js","components/common/PriceSection.js","components/common/Comment.js","components/common/VaultButton.js","components/AllContracts/index.js","components/Trade/index.js","utils/graph.js","utils/number.js","utils/calculation.js","components/MyVaults/index.js","components/types/index.js","components/OptionPage/ExerciseModal.js","components/OptionPage/VaultModal.js","components/OptionPage/VaultsList.js","components/OptionPage/OptionInfoBox.js","components/OptionPage/index.js","components/ManageVault/HeaderDashboard.js","components/ManageVault/CollateralManagement.js","components/ManageVault/IssuedTokenManagement.js","components/ManageVault/Liquidation.js","components/ManageVault/Exercise.js","components/ManageVault/index.js","components/ManagePool/Header.js","components/ManagePool/OptionExchange.js","components/ManagePool/AddLiquidity.js","components/ManagePool/RemoveLiquidity.js","components/ManagePool/index.js","components/Footer/index.js","App.js","serviceWorker.js","index.js"],"names":["web3","notify","Notify","dappId","process","networkId","optionContractABI","require","optionExchangeABI","oracleABI","Web3","ETH_ADDR","getTokenBalance","erc20Token","user","a","oTokenContract","eth","Contract","methods","balanceOf","call","balance","getDecimals","decimals","parseInt","getERC20Symbol","symbol","getERC20Info","address","token","totalSupply","totalSupplyDecimals","getMaxLiquidatable","oToken","vaultOwner","maxOTokensLiquidatable","maxVaultLiquidatable","getUnderlyingRequiredToExercise","tokenToExercise","underlyingRequiredToExercise","underlyringRequired","getAllowance","contract","spender","allowance","getBalance","utils","fromWei","getPrice","oracleAddr","oracle","price","getPremiumToPay","exchangeAddr","tokenToBuy","buyAmt","paymentToken","exchange","premiumToPay","getPremiumReceived","tokenToSell","sellAmt","premiumReceived","options","addr","title","name","collateral","underlying","strike","strikePrice","minRatio","uniswapExchange","expiry","ETH_ADDRESS","DAI","KETH","oTokenABI","exchangeABI","uniswapExchangeABI","invokerABI","UINT256_MAX","storedTheme","window","localStorage","getItem","onboard","Onboard","darkMode","subscriptions","wallet","provider","walletSelect","description","wallets","walletName","infuraKey","apiKey","updateModalMode","theme","config","connect","walletCheck","getState","disconnect","walletReset","checkConnectedAndGetAddress","checked","liquidate","oTokenAddr","owner","liquidateAmt","account","send","from","on","hash","kollateralLiquidate","optionExchange","amountOTokens","BigNumber","lte","Error","kollateralInvoker","data","abi","encodeParameters","invoke","burnOToken","burnAmt","burnOTokens","issueOToken","issueAmt","issueOTokens","addETHCollateral","ethAmt","value","toWei","toString","addERC20Collateral","collateralAmt","collateralAmtBN","lt","collateralToken","approve","removeCollateral","redeem","redeemVaultBalance","amt","exercise","amountToExercise","vaults","underlyingRequired","underlyingIsETH","openVault","buyOTokensFromExchange","buyOTokens","sellOTokensFromExchange","sellOTokens","addLiquidity","uniswapAddr","maxToken","minLiquidity","ethInWei","deadline","Math","ceil","Date","now","removeLiquidity","pool_token_amount","min_eth_wei","min_tokens","ConnectButton","setUser","useState","isConnected","setIsConnected","connectWeb3","disconnectWeb3","style","paddingTop","paddingRight","onClick","size","padding","entity","icon","label","ChangeMode","updateTheme","LinkButton","paddingLeft","opacity","fontSize","NavBar","history","useHistory","isHome","updateIsHome","useEffect","home","location","pathname","primary","height","goBack","push","secondary","MainButton","iconUrl","width","alt","src","HomePage","display","alignItems","marginRight","marginLeft","AddressBlock","shorten","BalanceBlock","asset","integer","digits","gt","str","split","length","RatioTag","isSafe","ratio","useCollateral","background","color","mode","defaultProps","SectionTitle","MaxButton","HelperText","parseFloat","toFixed","PriceSection","forceDisplay","amtBN","toNumber","Comment","text","ManageVaultButton","OpenVaultButton","AllContracts","fields","entries","entriesPerPage","renderEntry","goToToken","goToTrade","getAllVaultsForOption","optionAddress","query","postQuery","response","getAllVaultsForUser","actions","getLiquidationHistory","liquidationActionsQuery","liquidateActions","getExerciseHistory","option","exerciseActions","method","headers","body","JSON","stringify","fetch","res","json","toBaseUnitBN","rawAmt","raw","base","decimalsBN","times","pow","integerValue","toTokenUnitsBN","tokenAmount","tokenDecimals","div","formatDigits","num","percision","timeSince","timeStamp","secondsPast","getTime","ts","day","getDate","month","toDateString","match","replace","year","getFullYear","compareVaultRatio","vaultA","vaultB","rateA","rateB","comparison","compareVaultIssued","amountA","oTokensIssued","amountB","calculateStrikeValueInCollateral","collateralDecimals","undefined","strikeValueInWei","strikeValueInCollateral","collateralValueInWei","calculateRatio","tokenIssued","Infinity","colalteralBN","tokenIssuedBN","strikePriceBN","Promise","MyVaults","opendVaults","setOpenedVaults","tokensToOpen","setTokensToOpen","useMemo","userVaults","openedVaults","notOpenedTokens","map","entry","find","vault","optionsContract","isOpened","collatearlIsETH","oTokenName","sort","paddingBottom","PropTypes","shape","string","isRequired","number","ExerciseModal","underlyingDecimals","underlyingSymbol","userUnderlyingBalance","setUserUnderlyingBalance","userOTokenBalance","setUserOTokenBalance","opened","setOpened","exerciseAmount","setExerciseAmount","setUnderlyringRequired","nonEmptyVaults","filter","selectedIndexes","setSelectedIndexes","selectedHasEnoughCollateral","setHasEnoughCollateral","userUnderlying","userOTkns","checkHasEnoughToken","sumIssued","reduce","accumulator","current","plus","gte","onChangeExerciseAmt","amount","exeAmtBN","underlyingRawAmt","index","visible","onClose","heading","type","wide","adornment","adornmentPosition","onChange","event","target","renderSelectionCount","count","selection","onSelectEntries","indexes","disabled","vaultowners","VaultModal","collateralIsETH","toast","useToast","addValue","setAddValue","setLiquidateAmt","isCancelled","maxLiquidatable","getData","catch","error","justifyContent","selected","VaultOwnerList","vaultUsesCollateral","isLoading","setIsLoading","vaultsWithDetail","setVaultDetail","page","setPage","updateInfo","vaultDetail","id","setInterval","clearInterval","onPageChange","status","OptionOverview","tokenSymbol","totalCollateral","setTotalCollateral","setTotalSupply","totalCollt","rawCollateralBalance","supply","init","OptionPage","useParams","o","setVaults","setCollateralDecimals","setUnderlyingDecimals","setUnderlyingSymbol","colltDecimals","all","_decimals","_symbol","allVaults","OptionInfoBox","VaultsList","HeaderDashboard","newRatio","tokenInUnit","collateralBalance","CollateralManagement","isOwner","collateralAsset","collateralAssetBalance","strikeValue","setNewRatio","addCollateralAmt","setAddCollateralAmt","removeCollateralAmt","setRemoveCollateralAmt","collateralSymbol","setCollateralSymbol","updateNewRatio","newCollateral","amtRaw","newCollateralInWei","collateralBalanceRaw","newCollateralWei","minus","minRatioBN","minCollateral","maxToRemove","maxToRemoveInTokenUnit","IssuedTokenManagement","tokenBalance","setIssueAmt","setBurnAmt","newAmt","intputAmt","amountBN","onChangeIssueAmt","maxToIssueRaw","maxToIssue","onChangeBurnAmt","issued","maxToBurn","LiquidationHistory","userTokenBalance","setMaxLiquidatable","setEntries","amountToLiquidate","setAmtToLiquidate","maxToLiquidate","updateLiquidatable","actionsForThisVault","actionA","actionB","timestamp","updateList","maximum","min","amtToLiquidate","collateralToPay","liquidator","transactionHash","transaction","ExerciseHistory","amtCollateralToPay","oTokensToExercise","exerciser","ManageVault","tabSelected","setTabSelected","setVault","setStrikeValue","setRatio","ownerTokenBalance","setOwnerTokenBalance","setUserTokenBalance","userCollateralAssetBalance","setUserCollateralAssetBalance","noVault","setNoVault","v","vaultToManage","_ownerTokenBalance","_userTokenBalance","userColltBalance","ownerTokenBalanceBN","userTokenBalanceBN","strikeValInCollt","currentRatio","textAlign","end","items","Liquidation","Exercise","poolETHBalance","poolTokenBalance","OptionExchange","setBuyAmt","setSellAmt","setPremiumToPay","setPremiumReceived","updatePremiumToPay","butAmountBN","premium","updatePremiumReceived","sellAmountBN","AddLiquidity","otoken","otokenSymbol","otokenDecimals","userETHBalance","liquidityTokenDecimals","liquidityTokenSupply","amtETHToAdd","setAmtETHToAdd","amtTokenToAdd","setAmtTokenToAdd","liquidityMinted","liquidityMintedMin","ethToTokenRatio","tokenToEthRatio","onChangeTokenAmtToSend","tokenAmt","newEthAmt","newTokenAmt","onChangeETHAmtToSend","ethWei","RemoveLiquidity","userliquidityTokenBalance","amtLiquidityTokenToSell","setAmtLiquidityTokenToSell","poolPortion","estETHRecieved","estOTokenReceived","minETHReceived","minTokenReceived","tokenAmtBN","min_eth","min_token","ManagePool","setPoolTokenBalance","setPoolETHBalance","setUserETHBalance","setUserLiquidityTokenBalance","setLiquidityTokenSupply","setLiquidityTokenDecimals","updatePoolInfo","exTokenBalance","exchagneETHBalance","liquidityTokenInfo","liqTokenDecimal","liqTokenTotalSupply","exchangeTokenBalance","updateUserInfo","userEthBalance","liqTokenBalance","userOTknBalanceBN","userLiqTknBalanceBN","Footer","backgroundColor","position","left","bottom","external","href","App","setTheme","assetsUrl","newTheme","setItem","path","Trade","Boolean","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","console","message"],"mappings":"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","file":"static/js/main.7fdcf19f.chunk.js","sourcesContent":["/* eslint-disable camelcase */\nimport Web3 from 'web3';\nimport BigNumber from 'bignumber.js';\nimport Onboard from 'bnc-onboard';\n\nimport { notify } from './blockNative';\nimport { getAllowance, getPremiumToPay } from './infura';\nimport {\n  ETH_ADDRESS, DAI, ERC20_Liquidator, AAVE_LENDING, Kollateral_Liquidator, Kollateral_Invoker, KETH,\n} from '../constants/contracts';\n\nconst oTokenABI = require('../constants/abi/OptionContract.json');\nconst exchangeABI = require('../constants/abi/OptionExchange.json');\nconst uniswapExchangeABI = require('../constants/abi/UniswapExchange.json');\nconst aaveABI = require('../constants/abi/LendingPool.json');\nconst invokerABI = require('../constants/abi/KollateralInvoker.json');\n\nconst DEADLINE_FROM_NOW = 60 * 15;\nconst UINT256_MAX = '0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff';\n\nconst INFURA_KEY = process.env.REACT_APP_INFURA_KEY;\nconst BLOCKNATIVE_KEY = process.env.REACT_APP_BLOCKNATIVE_KEY;\nconst FORTMATIC_KEY = process.env.REACT_APP_FORTMATIC_KEY;\n\nconst storedTheme = window.localStorage.getItem('theme');\n\nlet web3;\n\nconst onboard = Onboard({\n  darkMode: storedTheme === 'dark',\n  dappId: BLOCKNATIVE_KEY, // [String] The API key created by step one above\n  networkId: 1, // [Integer] The Ethereum network ID your Dapp uses.\n  subscriptions: {\n    wallet: (wallet) => {\n      web3 = new Web3(wallet.provider);\n    },\n  },\n  walletSelect: {\n    description: 'Please select a wallet to connect to Opyn Dashboard',\n    wallets: [\n      { walletName: 'metamask' },\n      {\n        walletName: 'walletConnect',\n        infuraKey: INFURA_KEY,\n      },\n      {\n        walletName: 'fortmatic',\n        apiKey: FORTMATIC_KEY,\n      },\n      { walletName: 'trust' },\n      { walletName: 'coinbase' },\n      { walletName: 'status' },\n    ],\n  },\n});\n\n\nexport const updateModalMode = async (theme) => {\n  const darkMode = theme === 'dark';\n  onboard.config({ darkMode });\n};\n\nexport const connect = async () => {\n  const selected = await onboard.walletSelect();\n  if (!selected) return false;\n  const checked = await onboard.walletCheck();\n  if (!checked) return false;\n  return onboard.getState().address;\n};\n\nexport const disconnect = async () => {\n  onboard.walletReset();\n};\n\n// eslint-disable-next-line consistent-return\nexport const checkConnectedAndGetAddress = async () => {\n  let checked = false;\n  try {\n    checked = await onboard.walletCheck();\n  } catch (error) {\n    await onboard.walletSelect();\n    checked = await onboard.walletCheck();\n  } finally {\n    // eslint-disable-next-line no-unsafe-finally\n    if (checked) return onboard.getState().address;\n  }\n};\n\nexport const liquidate = async (oTokenAddr, owner, liquidateAmt) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, oTokenAddr);\n\n  await oToken.methods\n    .liquidate(owner, liquidateAmt)\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const aaveLiquidate = async (oTokenAddr, optionExchange, owner) => {\n  const account = await checkConnectedAndGetAddress();\n  const oTokenAddressBytes = web3.utils.hexToBytes(web3.utils.toHex(oTokenAddr));\n  const vaultAddressBytes = web3.utils.hexToBytes(web3.utils.toHex(owner));\n  const data = oTokenAddressBytes.concat(vaultAddressBytes);\n\n  const oToken = new web3.eth.Contract(oTokenABI, oTokenAddr);\n  const amountOTokens = await oToken.methods.maxOTokensLiquidatable(owner).call();\n\n  const premiumToPay = await getPremiumToPay(\n    optionExchange, // exchange\n    oTokenAddr,\n    amountOTokens,\n    DAI,\n  );\n\n  const lendingPool = new web3.eth.Contract(aaveABI, AAVE_LENDING);\n\n  // Use liquidator to liquidate our own position\n  await lendingPool.methods\n    .flashLoan(\n      ERC20_Liquidator,\n      DAI, // _reserve\n      premiumToPay, // amount\n      data,\n    )\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/**\n *\n * @param {string} oTokenAddr\n * @param {string} optionExchange\n * @param {string} owner\n * @param {string} paymentToken payment token address\n */\nexport const kollateralLiquidate = async (oTokenAddr, optionExchange, owner, paymentToken) => {\n  const account = await checkConnectedAndGetAddress();\n\n  const oToken = new web3.eth.Contract(oTokenABI, oTokenAddr);\n  const amountOTokens = await oToken.methods.maxOTokensLiquidatable(owner).call();\n\n  if (new BigNumber(amountOTokens).lte(new BigNumber(0))) {\n    throw new Error('Nothing to liquidate');\n  }\n\n  const premiumToPay = await getPremiumToPay(\n    optionExchange, // exchange\n    oTokenAddr,\n    amountOTokens,\n    paymentToken === KETH ? ETH_ADDRESS : paymentToken,\n  );\n\n  const kollateralInvoker = new web3.eth.Contract(invokerABI, Kollateral_Invoker);\n\n  const data = web3.eth.abi.encodeParameters(['address', 'address'], [owner, oTokenAddr]);\n  await kollateralInvoker.methods\n    .invoke(\n      Kollateral_Liquidator, // invokeTo\n      data, // invokeData\n      paymentToken, // tokenAddress: Dai, ETH,\n      premiumToPay,\n    )\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const burnOToken = async (oTokenAddr, burnAmt) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, oTokenAddr);\n  await oToken.methods\n    .burnOTokens(burnAmt)\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const issueOToken = async (oTokenAddr, issueAmt) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, oTokenAddr);\n\n  await oToken.methods\n    .issueOTokens(issueAmt, account)\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const addETHCollateral = async (oTokenAddr, owner, ethAmt) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, oTokenAddr);\n  await oToken.methods\n    .addETHCollateral(owner)\n    .send({ from: account, value: web3.utils.toWei(ethAmt.toString()) })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/**\n *\n * @param {string} collaral\n * @param {string} oTokenAddr\n * @param {string} owner\n * @param {number|string} collateralAmt in min unit\n */\nexport const addERC20Collateral = async (collateral, oTokenAddr, owner, collateralAmt) => {\n  const collateralAmtBN = new BigNumber(collateralAmt);\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, oTokenAddr);\n  const allowance = await getAllowance(collateral, account, oTokenAddr);\n  // Approve to move collateral\n  if (new BigNumber(allowance).lt(collateralAmtBN)) {\n    const collateralToken = new web3.eth.Contract(oTokenABI, collateral);\n    await collateralToken.methods\n      .approve(oTokenAddr, UINT256_MAX)\n      .send({ from: account })\n      .on('transactionHash', (hash) => {\n        notify.hash(hash);\n      });\n  }\n  await oToken.methods\n    .addERC20Collateral(owner, collateralAmtBN.toString())\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/**\n *\n * @param {string} collateral\n * @param {string} oTokenAddr\n * @param {string} collateralAmt in base unit\n */\nexport const removeCollateral = async (collateral, oTokenAddr, collateralAmt) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, oTokenAddr);\n  if (collateral === ETH_ADDRESS) {\n    await oToken.methods\n      .removeCollateral(collateralAmt)\n      .send({ from: account })\n      .on('transactionHash', (hash) => {\n        notify.hash(hash);\n      });\n  } else {\n    await oToken.methods\n      .removeCollateral(collateralAmt)\n      .send({ from: account })\n      .on('transactionHash', (hash) => {\n        notify.hash(hash);\n      });\n  }\n};\n\nexport const redeem = async (token) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, token);\n  await oToken.methods\n    .redeemVaultBalance()\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const approve = async (oTokenAddr, spender, amt) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, oTokenAddr);\n  await oToken.methods\n    .approve(spender, amt)\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/**\n * Exercise your oTokens\n * @param {string} oTokenAddr\n * @param {string} underlying asset type\n * @param {string} amountToExercise\n * @param {string[]} vaults vault owners\n */\nexport const exercise = async (oTokenAddr, underlying, amountToExercise, vaults) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, oTokenAddr);\n  const underlyingRequired = await oToken.methods\n    .underlyingRequiredToExercise(amountToExercise)\n    .call();\n\n  const underlyingIsETH = underlying === ETH_ADDRESS;\n\n  if (!underlyingIsETH) {\n    const allowance = await getAllowance(underlying, account, oTokenAddr);\n    if (new BigNumber(allowance).lt(new BigNumber(underlyingRequired))) {\n      await approve(underlying, oTokenAddr, UINT256_MAX);\n    }\n  }\n\n  await oToken.methods\n    .exercise(amountToExercise, vaults)\n    .send({ from: account, value: underlyingIsETH ? underlyingRequired : '0' })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const openVault = async (oTokenAddr) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, oTokenAddr);\n  await oToken.methods\n    .openVault()\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n// Option Exchange\n\nexport const buyOTokensFromExchange = async (oTokenAddr, exchangeAddr, buyAmt, ethAmt) => {\n  const account = await checkConnectedAndGetAddress();\n  const exchange = new web3.eth.Contract(exchangeABI, exchangeAddr);\n  await exchange.methods\n    .buyOTokens(\n      account,\n      oTokenAddr,\n      '0x0000000000000000000000000000000000000000', // payment\n      buyAmt,\n    )\n    .send({ from: account, value: ethAmt })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const sellOTokensFromExchange = async (oTokenAddr, exchangeAddr, sellAmt) => {\n  const account = await checkConnectedAndGetAddress();\n  const allowance = await getAllowance(oTokenAddr, account, exchangeAddr);\n  if (new BigNumber(allowance).lt(new BigNumber(sellAmt))) {\n    await approve(oTokenAddr, exchangeAddr, UINT256_MAX);\n  }\n  const exchange = new web3.eth.Contract(exchangeABI, exchangeAddr);\n  await exchange.methods\n    .sellOTokens(\n      account,\n      oTokenAddr,\n      '0x0000000000000000000000000000000000000000', // payment\n      sellAmt,\n    )\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n// Uniswap Exchange\n\n/**\n *\n */\nexport const addLiquidity = async (oToken, uniswapAddr, maxToken, minLiquidity, ethInWei) => {\n  const account = await checkConnectedAndGetAddress();\n  const allowance = await getAllowance(oToken, account, uniswapAddr);\n  if (new BigNumber(allowance).lt(new BigNumber(maxToken))) {\n    await approve(oToken, uniswapAddr, UINT256_MAX);\n  }\n  const uniswapExchange = new web3.eth.Contract(uniswapExchangeABI, uniswapAddr);\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\n  await uniswapExchange.methods\n    .addLiquidity(\n      minLiquidity, // min_liquidity\n      maxToken, // max_tokens\n      deadline, // deadline\n    )\n    .send({ from: account, value: ethInWei })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/**\n *\n */\nexport const removeLiquidity = async (uniswapAddr, pool_token_amount, min_eth_wei, min_tokens) => {\n  const account = await checkConnectedAndGetAddress();\n  const uniswapExchange = new web3.eth.Contract(uniswapExchangeABI, uniswapAddr);\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\n  await uniswapExchange.methods\n    .removeLiquidity(pool_token_amount, min_eth_wei, min_tokens, deadline)\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n","import Notify from 'bnc-notify';\n\nconst BLOCKNATIVE_KEY = process.env.REACT_APP_BLOCKNATIVE_KEY;\n\n// eslint-disable-next-line import/prefer-default-export\nexport const notify = Notify({\n  dappId: BLOCKNATIVE_KEY,\n  networkId: 1,\n});\n","import Web3 from 'web3';\n\nconst Promise = require('bluebird');\nconst optionContractABI = require('../constants/abi/OptionContract.json');\nconst optionExchangeABI = require('../constants/abi/OptionExchange.json');\nconst oracleABI = require('../constants/abi/Oracle.json');\n\n\nconst INFURA_KEY = process.env.REACT_APP_INFURA_KEY;\n\nconst web3 = new Web3(`https://mainnet.infura.io/v3/${INFURA_KEY}`);\n\nconst ETH_ADDR = '0x0000000000000000000000000000000000000000';\n\n// ERC20 Info\n\n/**\n *\n * @param {string} erc20Token address\n * @param {string} user address\n * @return {Promise<string>}\n */\nexport const getTokenBalance = async (erc20Token, user) => {\n  if (user === '') return '0';\n  const oTokenContract = new web3.eth.Contract(optionContractABI, erc20Token);\n  const balance = await oTokenContract.methods.balanceOf(user).call();\n  return balance;\n};\n\nexport const getDecimals = async (erc20Token) => {\n  const oTokenContract = new web3.eth.Contract(optionContractABI, erc20Token);\n  const decimals = await oTokenContract.methods.decimals().call();\n  return parseInt(decimals, 10);\n};\n\nexport const getERC20Symbol = async (erc20Token) => {\n  const oTokenContract = new web3.eth.Contract(optionContractABI, erc20Token);\n  return oTokenContract.methods.symbol().call();\n};\n\n/**\n *\n * @param {*} address\n * @return {Promise<{decimals: number, totalSupply: number}>}\n */\nexport const getERC20Info = async (address) => {\n  const token = new web3.eth.Contract(optionContractABI, address);\n  const totalSupplyDecimals = await token.methods.totalSupply().call();\n  const decimals = await token.methods.decimals().call();\n  const totalSupply = parseInt(totalSupplyDecimals, 10) / 10 ** parseInt(decimals, 10);\n  return { decimals: parseInt(decimals, 10), totalSupply };\n};\n\n// Option Contract\n\n/**\n * todo: use graph ql\n * @param {Array<string>} owners\n * @param {string} oToken\n */\nexport const getVaults = async (owners, oToken) => {\n  const oTokenContract = new web3.eth.Contract(optionContractABI, oToken);\n\n  const vaults = await Promise.map(owners, async (owner) => {\n    const res = await oTokenContract.methods.getVault(owner).call();\n    const collateral = web3.utils.fromWei(res[0]);\n    const oTokensIssued = res[1];\n    const underlying = res[2];\n    return {\n      collateral, oTokensIssued, underlying, owner, oToken,\n    };\n  });\n  return vaults;\n};\n\n/**\n * Max liquidatable for given vault\n * @param {string} oToken\n * @param {string} owner\n * @return {Promise<number>}\n */\nexport const getMaxLiquidatable = async (oToken, vaultOwner) => {\n  const oTokenContract = new web3.eth.Contract(optionContractABI, oToken);\n  const maxVaultLiquidatable = await oTokenContract.methods\n    .maxOTokensLiquidatable(vaultOwner)\n    .call();\n  return maxVaultLiquidatable;\n};\n\n// /**\n//  * Compare user balance with max liquidatable and decide max liquidatable\n//  * @param {string} oToken\n//  * @param {string} owner\n//  * @param {string} liquidator\n//  */\n// export const getMaxToLiquidate = async (oToken, owner, liquidator) => {\n//   const maxVaultLiquidatable = await getMaxLiquidatable(oToken, owner);\n//   const oTokenContract = new web3.eth.Contract(optionContractABI, oToken);\n//   const userbalance = liquidator ? await oTokenContract.methods.balanceOf(liquidator).call() : 0;\n\n//   const maxLiquidatable = Math.min(\n//     parseInt(userbalance, 10),\n//     parseInt(maxVaultLiquidatable, 10),\n//   ).toString();\n\n//   return parseInt(maxLiquidatable, 10);\n// };\n\n/**\n *\n * @param {string} oToken\n * @param {string} tokenToExercise\n * @return {Promise<string>}\n */\nexport const getUnderlyingRequiredToExercise = async (oToken, tokenToExercise) => {\n  const oTokenContract = new web3.eth.Contract(optionContractABI, oToken);\n  const underlyringRequired = await oTokenContract.methods\n    .underlyingRequiredToExercise(tokenToExercise)\n    .call();\n  // console.log(`what `, underlyringRequired)\n  return underlyringRequired;\n};\n\nexport const getAssetsAndOracle = async (address) => {\n  const token = new web3.eth.Contract(optionContractABI, address);\n  const [oracle, underlying, strike, minRatioObj, strikePriceObj] = await Promise.all([\n    token.methods.COMPOUND_ORACLE().call(),\n    token.methods.underlying().call(),\n    token.methods.strike().call(),\n    token.methods.minCollateralizationRatio().call(),\n    token.methods.strikePrice().call(),\n  ]);\n  const strikePrice = strikePriceObj[0] * 10 ** strikePriceObj[1];\n  const minRatio = minRatioObj[0] * 10 ** minRatioObj[1];\n  return {\n    underlying, strike, minRatio, strikePrice, oracle,\n  };\n};\n\n/**\n *\n * @param {string} contract\n * @param {string} user\n * @param {string} spender\n * @return {Promise<string>}\n */\nexport const getAllowance = async (contract, user, spender) => {\n  const token = new web3.eth.Contract(optionContractABI, contract);\n  const allowance = await token.methods.allowance(user, spender).call();\n  return allowance;\n};\n\n/**\n * Get balance in eth for the account\n * @param {string} address\n */\nexport const getBalance = async (address) => {\n  if (address === '') return '0';\n  const balance = await web3.eth.getBalance(address);\n  return web3.utils.fromWei(balance);\n};\n\n/**\n * Get price of token in unit of wei\n * @param {string} oracleAddr\n * @param {string} token\n * @returns {Promise<string>}\n */\nexport const getPrice = async (oracleAddr, token) => {\n  const oracle = new web3.eth.Contract(oracleABI, oracleAddr);\n  const price = await oracle.methods.getPrice(token).call();\n  return price; // unit: wei/ per token\n};\n\n// Option Exchange\nexport const getPremiumToPay = async (\n  exchangeAddr,\n  tokenToBuy,\n  buyAmt,\n  paymentToken = ETH_ADDR,\n) => {\n  const exchange = new web3.eth.Contract(optionExchangeABI, exchangeAddr);\n  const premiumToPay = await exchange.methods.premiumToPay(tokenToBuy, paymentToken, buyAmt).call();\n  return premiumToPay;\n};\n\nexport const getPremiumReceived = async (exchangeAddr, tokenToSell, sellAmt) => {\n  const exchange = new web3.eth.Contract(optionExchangeABI, exchangeAddr);\n  const payoutToken = ETH_ADDR;\n  const premiumReceived = await exchange.methods\n    .premiumReceived(tokenToSell, payoutToken, sellAmt)\n    .call();\n  return web3.utils.fromWei(premiumReceived);\n};\n\n// uniswapExchange\n","/* eslint-disable camelcase */\nexport const options = [\n  {\n    addr: '0x48ab8a7d3bf2eb942e153e4275ae1a8988238dc7',\n    title: 'Opyn ETH Put $100',\n\n    // constants in contract\n    symbol: 'oETH $100 Put',\n    name: 'Opyn ETH Put $100 04/03/20',\n    decimals: 8,\n    oracle: '0x7054e08461e3eCb7718B63540adDB3c3A1746415',\n    collateral: '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',\n    underlying: '0x0000000000000000000000000000000000000000',\n    strike: '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',\n    strikePrice: 1e-6,\n    minRatio: 1,\n    exchange: '0x39246c4f3f6592c974ebc44f80ba6dc69b817c71',\n    uniswapExchange: '0x30651Fc7F912f5E40AB22F3D34C2159431Fb1c4F',\n    expiry: 1585958340,\n  },\n  {\n    addr: '0x98cc3bd6af1880fcfda17ac477b2f612980e5e33',\n    title: 'cDai Insurance',\n\n    // constants in contract\n    symbol: 'ocDai',\n    name: 'Opyn cDai Insurance',\n    decimals: 8,\n    oracle: '0x7054e08461e3eCb7718B63540adDB3c3A1746415',\n    collateral: '0x0000000000000000000000000000000000000000',\n    underlying: '0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643',\n    strike: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48',\n    strikePrice: 1.859e-10,\n    minRatio: 1.4,\n    exchange: '0x5778f2824a114f6115dc74d432685d3336216017',\n    uniswapExchange: '0xA6923533A6362008e9b536271C2Bdc0FF1467D3c',\n    expiry: 1612915200,\n  },\n  {\n    addr: '0x8ed9f862363ffdfd3a07546e618214b6d59f03d4',\n    title: 'cUSDC Insurance',\n\n    // constants in contract\n    symbol: 'ocUSDC',\n    name: 'Opyn cUSDC Insurance',\n    decimals: 8,\n    oracle: '0x7054e08461e3eCb7718B63540adDB3c3A1746415',\n    collateral: '0x0000000000000000000000000000000000000000',\n    underlying: '0x39AA39c021dfbaE8faC545936693aC917d5E7563',\n    strike: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48',\n    strikePrice: 2.08e-10,\n    minRatio: 1.4,\n    exchange: '0x5778f2824a114f6115dc74d432685d3336216017',\n    uniswapExchange: '0xE3A0a2431a093fed99037987eD0A88550e5E79AA',\n    expiry: 1612915200,\n  },\n  {\n    addr: '0x4ba8c6ce0e855c051e65dfc37883360efaf7c82b',\n    title: 'y.curve.fi Insurance',\n    // constants in contract\n    symbol: 'oCRV',\n    name: 'Opyn y.curve.fi Insurance',\n    decimals: 8,\n    oracle: '0x7054e08461e3eCb7718B63540adDB3c3A1746415',\n    collateral: '0x0000000000000000000000000000000000000000',\n    underlying: '0xdF5e0e81Dff6FAF3A7e52BA697820c5e32D806A8',\n    strike: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48',\n    strikePrice: 9.2e-16,\n    minRatio: 1.6,\n    exchange: '0x5778f2824a114f6115dc74d432685d3336216017',\n    uniswapExchange: '0x21f5E9D4Ec20571402A5396084B1634314A68c97',\n    expiry: 1585440000,\n  },\n  {\n    addr: '0xddac4aed7c8f73032b388efe2c778fc194bc81ed',\n    title: 'cDai Insurance (Old)',\n    // constants in contract\n    symbol: 'ocDai',\n    name: 'Opyn cDai Insurance',\n    decimals: 8,\n    oracle: '0x7054e08461e3eCb7718B63540adDB3c3A1746415',\n    collateral: '0x0000000000000000000000000000000000000000',\n    underlying: '0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643',\n    strike: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48',\n    strikePrice: 2e-10,\n    minRatio: 1.4,\n    exchange: '0x5778f2824a114f6115dc74d432685d3336216017',\n    uniswapExchange: '0x8a0976500EED661202810bAB030a057DF15c4CC9',\n    expiry: 1612915200,\n  },\n];\n\nexport const ETH_ADDRESS = '0x0000000000000000000000000000000000000000';\nexport const ERC20_Liquidator = '0xF8cE4E70F52FdDBc72547Ce9616ed3E7d4525e8A';\nexport const Kollateral_Liquidator = '0xfBaB30f79bbbC92C708E7e9b01E329e003d8Ce48';\n\nexport const AAVE_LENDING = '0x398eC7346DcD622eDc5ae82352F02bE94C62d119';\nexport const Kollateral_Invoker = '0x06d1f34fd7c055ae5ca39aa8c6a8e10100a45c01';\n\nexport const DAI = '0x6b175474e89094c44da98b954eedeac495271d0f';\nexport const USDC = '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48';\nexport const KETH = '0x0000000000000000000000000000000000000001';\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Button, IdentityBadge, IconConnect, Box, IconPower, LinkBase,\n} from '@aragon/ui';\n\nimport { connect, disconnect } from '../../utils/web3';\n\nfunction ConnectButton({ user, setUser }) {\n  const [isConnected, setIsConnected] = useState(false);\n\n  const connectWeb3 = async () => {\n    const address = await connect();\n    if (address === false) return;\n    setIsConnected(true);\n    setUser(address);\n  };\n\n  const disconnectWeb3 = async () => {\n    await disconnect();\n    setIsConnected(false);\n    setUser('');\n  };\n\n  return isConnected ? (\n    <>\n      <div style={{ paddingTop: 5, paddingRight: 5 }}>\n        <LinkBase onClick={disconnectWeb3} size=\"small\">\n          {' '}\n          <IconPower />\n          {' '}\n        </LinkBase>\n      </div>\n      <Box padding={6}>\n        <IdentityBadge entity={user} />\n      </Box>\n\n    </>\n  ) : (\n    <Button icon={<IconConnect />} label=\"Connect\" onClick={connectWeb3} />\n  );\n}\n\nConnectButton.propTypes = {\n  user: PropTypes.string.isRequired,\n  setUser: PropTypes.func.isRequired,\n};\n\nexport default ConnectButton;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, IconStarFilled, IconStar } from '@aragon/ui';\n\nfunction ChangeMode({ theme, updateTheme }) {\n  const handleChangeTheme = () => {\n    if (theme === 'light') updateTheme('dark');\n    else updateTheme('light');\n  };\n\n  return (\n    <Button\n      icon={theme === 'dark' ? <IconStar /> : <IconStarFilled />}\n      onClick={handleChangeTheme}\n      label=\"Theme\"\n    />\n  );\n}\n\nChangeMode.propTypes = {\n  theme: PropTypes.string.isRequired,\n  updateTheme: PropTypes.func.isRequired,\n};\n\nexport default ChangeMode;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom';\n\nimport { Bar, BackButton, LinkBase } from '@aragon/ui';\nimport ConnectButton from './ConnectButton';\nimport ChangeModeButton from './SettingsButton';\n\nfunction NavBar({\n  theme, updateTheme, user, setUser,\n}) {\n  const history = useHistory();\n  const [isHome, updateIsHome] = useState(true);\n\n  useEffect(() => {\n    const home = history.location.pathname === '/';\n    updateIsHome(home);\n  }, [history.location.pathname]);\n\n  return (\n    <Bar\n      primary={\n        isHome ? (\n          <></>\n        ) : (\n          <>\n            <div style={{ height: '100%' }}>\n              <BackButton\n                onClick={() => {\n                  history.goBack();\n                }}\n              />\n            </div>\n            <LinkButton\n              title=\"My Vaults\"\n              onClick={() => {\n                history.push('/myvaults/');\n              }}\n            />\n            <LinkButton\n              title=\"All Contracts\"\n              onClick={() => {\n                history.push('/options/');\n              }}\n            />\n            <LinkButton\n              title=\"Trade\"\n              onClick={() => {\n                history.push('/trade/');\n              }}\n            />\n          </>\n        )\n      }\n      secondary={(\n        <>\n          <ConnectButton user={user} setUser={setUser} />\n          <ChangeModeButton theme={theme} updateTheme={updateTheme} />\n        </>\n      )}\n    />\n  );\n}\n\n\nNavBar.propTypes = {\n  theme: PropTypes.string.isRequired,\n  updateTheme: PropTypes.func.isRequired,\n  user: PropTypes.string.isRequired,\n  setUser: PropTypes.func.isRequired,\n};\n\nfunction LinkButton({ title, onClick }) {\n  return (\n    <div style={{ paddingLeft: 40 }}>\n      <LinkBase onClick={onClick}>\n        <div style={{ padding: '1%', opacity: 0.5, fontSize: 17 }}>{title}</div>\n      </LinkBase>\n    </div>\n  );\n}\n\nLinkButton.propTypes = {\n  title: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default NavBar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom';\nimport { Header, Box, LinkBase } from '@aragon/ui';\n\nfunction HomePage() {\n  const history = useHistory();\n\n  return (\n    <>\n      <Header primary=\"Welcome to Opyn Dashboard\" />\n      <div style={{ padding: 5, opacity: 0.5 }}> Tools for DeFi Risk Management. </div>\n      <div style={{ padding: '1%', display: 'flex', alignItems: 'center' }}>\n        <div style={{ width: '30%', marginRight: '3%' }}>\n          <MainButton\n            title=\"My Vaults\"\n            description=\"Manage collateral, Mint/Burn oTokens\"\n            iconUrl=\"https://opyn.co/static/media/1.68813886.svg\"\n            onClick={() => {\n              history.push('/myvaults');\n            }}\n          />\n        </div>\n\n        <div style={{ width: '30%' }}>\n          <MainButton\n            title=\"All Contracts\"\n            description=\" Monitor and liquidate vaults.\"\n            iconUrl=\"https://opyn.co/static/media/2.18d22be0.svg\"\n            onClick={() => {\n              history.push('/options/');\n            }}\n          />\n        </div>\n\n        <div style={{ width: '30%', marginLeft: '3%' }}>\n          <MainButton\n            title=\"Trade\"\n            description=\"Buy, Sell or Provided Liquidity.\"\n            iconUrl=\"https://opyn.co/static/media/3.4da8b24d.svg\"\n            onClick={() => {\n              history.push('./trade');\n            }}\n          />\n        </div>\n      </div>\n    </>\n  );\n}\n\nfunction MainButton({\n  title, description, iconUrl, onClick,\n}) {\n  return (\n    <LinkBase onClick={onClick} style={{ width: '100%' }}>\n      <Box>\n        <div style={{ padding: 10, fontSize: 18 }}>{title}</div>\n        <img alt=\"icon\" style={{ padding: 10, height: 64 }} src={iconUrl} />\n        <div style={{ paddingTop: 5, opacity: 0.5 }}>\n          {' '}\n          {description}\n          {' '}\n        </div>\n\n      </Box>\n    </LinkBase>\n  );\n}\n\nMainButton.propTypes = {\n  title: PropTypes.string.isRequired,\n  description: PropTypes.string.isRequired,\n  iconUrl: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default HomePage;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { IdentityBadge } from '@aragon/ui';\n\nfunction AddressBlock({ label, address }) {\n  return (\n    <>\n      <div style={{ fontSize: 16, padding: 3 }}>{label}</div>\n      <div style={{ padding: 5 }}>\n        <IdentityBadge entity={address} shorten />\n      </div>\n    </>\n  );\n}\n\nAddressBlock.propTypes = {\n  label: PropTypes.string.isRequired,\n  address: PropTypes.string.isRequired,\n};\n\nexport default AddressBlock;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport BigNumber from 'bignumber.js';\n\nfunction BalanceBlock({ asset, balance }) {\n  let integer = '0';\n  let digits = '0';\n  if (new BigNumber(balance).gt(new BigNumber(0))) {\n    const str = new BigNumber(balance).toString();\n    const split = str.split('.');\n    integer = split[0];\n    digits = split.length > 1 ? str.split('.')[1] : '0';\n  }\n\n  return (\n    <>\n      <div style={{ fontSize: 14, padding: 3 }}>{asset}</div>\n      <div style={{ padding: 3 }}>\n        <span style={{ fontSize: 24 }}>{integer}</span>\n        .\n        <span style={{ fontSize: 18 }}>\n          {' '}\n          {digits}\n          {' '}\n        </span>\n      </div>\n    </>\n  );\n}\n\nBalanceBlock.propTypes = {\n  asset: PropTypes.string.isRequired,\n  balance: PropTypes.oneOfType([\n    PropTypes.instanceOf(BigNumber),\n    PropTypes.string,\n    PropTypes.number,\n  ]).isRequired,\n};\n\nexport default BalanceBlock;\n","import React from 'react';\nimport { Tag } from '@aragon/ui';\nimport Proptypes from 'prop-types';\n\nfunction RatioTag({ isSafe, ratio, useCollateral = true }) {\n  return !useCollateral ? (\n    <Tag color=\"#78827a\" background=\"#c0c2c0\">\n      Cool\n    </Tag>\n  ) : isSafe ? (\n    ratio < 1.6 ? (\n      <Tag background=\"#FFEBAD\" color=\"#FEC100\">\n        {' '}\n        Danger\n        {' '}\n      </Tag>\n    ) : (\n      <Tag mode=\"new\"> safe </Tag>\n    )\n  ) : (\n    <Tag color=\"#E34343\" background=\"#FFC6C6\">\n      Unsafe!\n    </Tag>\n  );\n}\n\nRatioTag.propTypes = {\n  isSafe: Proptypes.bool.isRequired,\n  ratio: Proptypes.number.isRequired,\n  useCollateral: Proptypes.bool,\n};\n\nRatioTag.defaultProps = {\n  useCollateral: true,\n};\n\nexport default RatioTag;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction SectionTitle({ title }) {\n  return <div style={{ padding: 10, fontSize: 20 }}>{title}</div>;\n}\n\nSectionTitle.propTypes = {\n  title: PropTypes.string.isRequired,\n};\n\nexport default SectionTitle;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n  ButtonBase,\n} from '@aragon/ui';\n\nfunction MaxButton({ onClick }) {\n  return (\n    <div style={{ padding: 3 }}>\n      <ButtonBase onClick={onClick}>\n        <span style={{ opacity: 0.5 }}> Max </span>\n      </ButtonBase>\n    </div>\n  );\n}\n\nMaxButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default MaxButton;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction HelperText({ label, amt }) {\n  if (parseFloat(amt) > 0) {\n    return (\n      <div style={{ padding: 3, opacity: 0.5 }}>\n        <span style={{ fontSize: 13 }}>\n          {label}\n        </span>\n        <span style={{ fontSize: 13 }}>\n          {parseFloat(amt).toFixed(5)}\n        </span>\n      </div>\n    );\n  } return <div style={{ padding: 3, opacity: 0.5 }} />;\n}\n\nHelperText.propTypes = {\n  label: PropTypes.string.isRequired,\n  amt: PropTypes.string.isRequired,\n};\n\nexport default HelperText;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport BigNumber from 'bignumber.js';\n\nfunction PriceSection({\n  label, amt, symbol = '', forceDisplay = false,\n}) {\n  const amtBN = new BigNumber(amt);\n  if (amtBN.gt(new BigNumber(0)) || forceDisplay) {\n    return (\n      <div style={{ padding: 3, opacity: 0.5 }}>\n        <span style={{ fontSize: 13 }}>{label}</span>\n        <span style={{ fontSize: 13 }}>{amtBN.toNumber().toFixed(5)}</span>\n        <span style={{ fontSize: 13 }}>{symbol}</span>\n      </div>\n    );\n  }\n  return <div style={{ padding: 3, opacity: 0.5 }} />;\n}\n\nPriceSection.propTypes = {\n  label: PropTypes.string.isRequired,\n  symbol: PropTypes.string,\n  amt: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n    PropTypes.instanceOf(BigNumber),\n  ]).isRequired,\n  forceDisplay: PropTypes.bool,\n};\n\nPriceSection.defaultProps = {\n  symbol: '',\n  forceDisplay: false,\n};\n\nexport default PriceSection;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Comment({ text }) {\n  return (\n    <div style={{ padding: 5, opacity: 0.5 }}>\n      {text}\n    </div>\n  );\n}\n\nComment.propTypes = {\n  text: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.object,\n  ]).isRequired,\n};\n\nexport default Comment;\n","import React from 'react';\nimport { Button } from '@aragon/ui';\nimport { useHistory } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { openVault } from '../../utils/web3';\n\n\nfunction ManageVaultButton({ oToken, owner }) {\n  const history = useHistory();\n\n  const goToManagePage = () => {\n    history.push(`/manage/${oToken}/${owner}`);\n  };\n\n  return <Button onClick={() => goToManagePage(oToken, owner)} label=\"Manage\" />;\n}\n\nManageVaultButton.propTypes = {\n  oToken: PropTypes.string.isRequired,\n  owner: PropTypes.string.isRequired,\n};\n\n\nfunction OpenVaultButton({ oToken, user }) {\n  const history = useHistory();\n\n  const openAndGoToVault = () => {\n    openVault(oToken);\n    history.push(`/manage/${oToken}/${user}`);\n  };\n\n  return (\n    <Button\n      onClick={() => openAndGoToVault(oToken)}\n      label=\"Open Vault\"\n    />\n  );\n}\n\nOpenVaultButton.propTypes = {\n  oToken: PropTypes.string.isRequired,\n  user: PropTypes.string.isRequired,\n};\n\nexport { ManageVaultButton, OpenVaultButton };\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  Header, DataView, IdentityBadge, Button,\n} from '@aragon/ui';\nimport { options } from '../../constants/contracts';\n\nimport { Comment } from '../common';\n\nfunction AllContracts() {\n  const history = useHistory();\n  const goToToken = (addr) => {\n    history.push(`/option/${addr}`);\n  };\n  return (\n    <>\n      <Header primary=\"All Contracts\" />\n      <Comment text=\"Choose an option contract to proceed.\" />\n      <DataView\n        fields={['Name', 'Contract', '']}\n        entries={options}\n        entriesPerPage={6}\n        renderEntry={({ addr, title }) => [\n          <>{title}</>,\n          <IdentityBadge entity={addr} shorten={false} />,\n          <Button onClick={() => goToToken(addr)}> View Vaults </Button>,\n        ]}\n      />\n    </>\n  );\n}\n\nexport default AllContracts;\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  Header, DataView, IdentityBadge, Button,\n} from '@aragon/ui';\nimport { options } from '../../constants/contracts';\n\nimport { Comment } from '../common';\n\nfunction AllContracts() {\n  const history = useHistory();\n  const goToTrade = (addr) => {\n    history.push(`/trade/${addr}`);\n  };\n  return (\n    <>\n      <Header primary=\"Trade\" />\n      <Comment text=\"Choose an option contract to proceed\" />\n      <DataView\n        fields={['Name', 'Contract', '']}\n        entries={options}\n        entriesPerPage={6}\n        renderEntry={({ addr, title }) => [\n          <>{title}</>,\n          <IdentityBadge entity={addr} shorten={false} />,\n          <Button onClick={() => goToTrade(addr)}> Start Trading </Button>,\n        ]}\n      />\n    </>\n  );\n}\n\nexport default AllContracts;\n","// const prefix = 'https://cors-anywhere-anton.herokuapp.com/';\nconst opynGraphEndpoint = 'https://api.thegraph.com/subgraphs/name/aparnakr/opyn';\n\n/**\n * @return {Promise<Array<{colalteral: string, oTokensIssued: string, owner: string}>>}\n */\nexport async function getAllVaultsForOption(optionAddress) {\n  const query = `\n  {\n    vaults(where: {\n      optionsContract: \"${optionAddress}\"\n    }) {\n      owner\n      oTokensIssued,\n      collateral,\n    }\n  }`;\n  const response = await postQuery(query);\n  const vaults = response.data.vaults;\n  return vaults;\n}\n\nexport async function getAllVaultsForUser(owner) {\n  const query = `{\n    vaults (where: {owner: \"${owner}\"}) {\n      optionsContract {\n        address\n      }\n      oTokensIssued,\n      collateral,\n    }\n  }`;\n  const response = await postQuery(query);\n  const actions = response.data.vaults;\n  return actions;\n}\n\nexport async function getLiquidationHistory(owner) {\n  const query = liquidationActionsQuery(owner);\n  const response = await postQuery(query);\n  return response.data.liquidateActions;\n}\n\nconst liquidationActionsQuery = (owner) => `{\n  liquidateActions(where: {\n    vault_contains: \"${owner}\"\n  }) {\n    vault {\n      owner,\n      optionsContract {\n        address\n      }\n    },\n    liquidator,\n    collateralToPay,\n    timestamp\n    transactionHash\n  }\n}\n\n`;\n\n/**\n * Get all exercise history for one user\n * @param {string} owner vault owner\n * @param {string} option contract address\n * @return {Promise<{\n * amtCollateralToPay: string,\n * exerciser:string,\n * oTokensToExercise:string,\n * timestamp:string,\n * transactionHash: string}>}\n */\nexport async function getExerciseHistory(owner, option) {\n  const query = `{\n    exerciseActions (where: {\n      vault_contains: \"${owner}\"\n      optionsContract_contains: \"${option}\"\n    }) {\n      exerciser\n      oTokensToExercise\n      amtCollateralToPay\n      transactionHash\n      timestamp\n    }\n  }`;\n\n  const response = await postQuery(query);\n  return response.data.exerciseActions;\n}\n\nconst postQuery = async (query) => {\n  const options = {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ query }),\n  };\n  const res = await fetch(opynGraphEndpoint, options);\n  return res.json();\n};\n","import Web3 from 'web3';\nimport BigNumber from 'bignumber.js';\n\nconst web3 = new Web3();\n\n/**\n * Convert 10.999 to 10999000\n * @param {number|string|BigNumber} rawAmt\n * @param {number} decimals\n * @returns {BigNumber}\n */\nexport function toBaseUnitBN(rawAmt, decimals) {\n  const raw = new BigNumber(rawAmt);\n  const base = new BigNumber(10);\n  const decimalsBN = new BigNumber(decimals);\n  return raw.times(base.pow(decimalsBN)).integerValue();\n}\n\n/**\n * Convert 10999000 to 10.999\n * @param {string | number | BigNumber} tokenAmount in base unit\n * @param {number} tokenDecimals\n * @return {BigNumber}\n */\nexport const toTokenUnitsBN = (tokenAmount, tokenDecimals) => {\n  const amt = new BigNumber(tokenAmount);\n  const digits = new BigNumber(10).pow(new BigNumber(tokenDecimals));\n  return amt.div(digits);\n};\n\nexport function formatDigits(num, percision) {\n  return parseFloat(num).toFixed(percision);\n}\n\nexport const fromWei = web3.utils.fromWei;\nexport const toWei = web3.utils.toWei;\n\nexport function timeSince(timeStamp) {\n  const now = new Date();\n  const secondsPast = (now.getTime() - timeStamp) / 1000;\n  if (secondsPast < 60) {\n    return `${parseInt(secondsPast, 10)}s ago`;\n  }\n  if (secondsPast < 3600) {\n    return `${parseInt(secondsPast / 60, 10)}m ago`;\n  }\n  if (secondsPast <= 86400) {\n    return `${parseInt(secondsPast / 3600, 10)}h ago`;\n  }\n  if (secondsPast > 86400) {\n    const ts = new Date(timeStamp);\n    const day = ts.getDate();\n    const month = ts\n      .toDateString()\n      .match(/ [a-zA-Z]*/)[0]\n      .replace(' ', '');\n    const year = ts.getFullYear() === now.getFullYear() ? '' : ` ${ts.getFullYear()}`;\n    return `${day} ${month}${year}`;\n  }\n\n  return timeStamp;\n}\n\nexport function compareVaultRatio(vaultA, vaultB) {\n  const rateA = vaultA.ratio;\n  const rateB = vaultB.ratio;\n\n  let comparison = 0;\n  if (parseFloat(rateA) > parseFloat(rateB)) {\n    comparison = 1;\n  } else if (parseFloat(rateA) < parseFloat(rateB)) {\n    comparison = -1;\n  }\n  return comparison;\n}\n\nexport function compareVaultIssued(vaultA, vaultB) {\n  const amountA = vaultA.oTokensIssued;\n  const amountB = vaultB.oTokensIssued;\n\n  let comparison = 0;\n  if (parseInt(amountA, 10) > parseInt(amountB, 10)) {\n    comparison = -1;\n  } else if (parseInt(amountA, 10) < parseInt(amountB, 10)) {\n    comparison = 1;\n  }\n  return comparison;\n}\n","import BigNumber from 'bignumber.js';\nimport { getPrice, getDecimals } from './infura';\nimport { toBaseUnitBN } from './number';\n\n/**\n * Get strike value in collateral for ratio calculation.\n * @param {string} collateral address\n * @param {string} strike address\n * @param {string} oracle address\n * @param {number?} collateralDecimals if provided, wont get again if needed\n * @return {Promise<BigNumber>}\n */\nexport const calculateStrikeValueInCollateral = async (\n  collateral,\n  strike,\n  oracle,\n  collateralDecimals = undefined,\n) => {\n  const ETH_Address = '0x0000000000000000000000000000000000000000';\n  let strikeValueInCollateral;\n  let decimals = collateralDecimals;\n  if (collateral === ETH_Address) {\n    const strikeValueInWei = await getPrice(oracle, strike);\n    strikeValueInCollateral = new BigNumber(strikeValueInWei);\n  } else if (collateral === strike) {\n    // No collateral, like ETH option\n    if (decimals === undefined) decimals = await getDecimals(collateral);\n    strikeValueInCollateral = new BigNumber(10).pow(new BigNumber(decimals));\n  } else {\n    // Use other ERC20 as collateral : Untested\n    if (decimals === undefined) decimals = await getDecimals(collateral);\n    const strikeValueInWei = await getPrice(oracle, strike);\n    const collateralValueInWei = await getPrice(oracle, collateral);\n    strikeValueInCollateral = toBaseUnitBN(\n      parseInt(strikeValueInWei, 10) / parseInt(collateralValueInWei, 10),\n      decimals,\n    );\n  }\n  return strikeValueInCollateral;\n};\n\n/**\n *\n * @param {string|number|BigNumber} collateral number of collateral in base unit\n * @param {string|number|BigNumber} tokenIssued number of token in base unit\n * @param {string|number|BigNumber} strikePrice\n * @param {BigNumber} strikeValueInCollateral\n * @return {number}\n */\nexport const calculateRatio = (collateral, tokenIssued, strikePrice, strikeValueInCollateral) => {\n  if (tokenIssued === '0') return Infinity;\n  const colalteralBN = new BigNumber(collateral);\n  const tokenIssuedBN = new BigNumber(tokenIssued);\n  const strikePriceBN = new BigNumber(strikePrice);\n  // const strikeValueInCollateralBN = new BigNumber(strikeValueInCollateral.toString())\n  const result = colalteralBN\n    .div(tokenIssuedBN)\n    .div(strikePriceBN)\n    .div(strikeValueInCollateral);\n  return result.toNumber();\n};\n","import React, { useState, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { Header, DataView, IdentityBadge } from '@aragon/ui';\nimport { options, ETH_ADDRESS } from '../../constants/contracts';\nimport {\n  SectionTitle, ManageVaultButton, OpenVaultButton, Comment,\n} from '../common';\nimport { getAllVaultsForUser } from '../../utils/graph';\nimport { formatDigits, compareVaultRatio, toTokenUnitsBN } from '../../utils/number';\nimport { calculateRatio, calculateStrikeValueInCollateral } from '../../utils/calculation';\nimport { getDecimals } from '../../utils/infura';\n\nconst Promise = require('bluebird');\n\nfunction MyVaults({ user }) {\n  const [opendVaults, setOpenedVaults] = useState([]);\n  const [tokensToOpen, setTokensToOpen] = useState([]);\n  const isConnected = user !== '';\n\n  // Only request all vaults once\n  useMemo(async () => {\n    if (!isConnected) return;\n    const userVaults = await getAllVaultsForUser(user);\n    const openedVaults = [];\n    const notOpenedTokens = [];\n    await Promise.map(options, async (option) => {\n      const entry = userVaults.find((vault) => vault.optionsContract.address === option.addr);\n      const isOpened = entry !== undefined;\n      const collatearlIsETH = option.collateral === ETH_ADDRESS;\n      if (isOpened) {\n        const collateralDecimals = collatearlIsETH ? 18 : await getDecimals(option.collateral);\n        const strikeValueInCollateral = await calculateStrikeValueInCollateral(\n          option.collateral,\n          option.strike,\n          option.oracle,\n          collateralDecimals,\n        );\n        const ratio = calculateRatio(\n          entry.collateral,\n          entry.oTokensIssued,\n          option.strikePrice,\n          strikeValueInCollateral,\n        );\n        openedVaults.push({\n          oToken: option.addr,\n          oTokenName: option.title,\n          collateral: entry.collateral,\n          collateralDecimals,\n          ratio,\n        });\n      } else {\n        notOpenedTokens.push({\n          oToken: option.addr,\n          oTokenName: option.title,\n        });\n      }\n    });\n    setOpenedVaults(openedVaults.sort(compareVaultRatio));\n    setTokensToOpen(notOpenedTokens);\n  }, [isConnected, user]);\n\n  return (\n    <>\n      <Header primary=\"My Vaults\" />\n      {isConnected ? (\n        <>\n          {opendVaults.length > 0 ? (\n            <div style={{ paddingBottom: '3%' }}>\n              <SectionTitle title=\"Existing Vaults\" />\n              <DataView\n                fields={['Token', 'contract', 'collateral', 'Ratio', '']}\n                entries={opendVaults}\n                entriesPerPage={6}\n                renderEntry={({\n                  oToken, oTokenName, collateral, collateralDecimals, ratio,\n                }) => [\n                  oTokenName,\n                  <IdentityBadge entity={oToken} />,\n                  formatDigits(toTokenUnitsBN(collateral, collateralDecimals).toNumber(), 5),\n                  formatDigits(ratio, 4),\n                  <ManageVaultButton oToken={oToken} owner={user} />,\n                ]}\n              />\n            </div>\n          ) : (\n            <></>\n          )}\n          {tokensToOpen.length > 0 ? (\n            // Show vaults to open\n            <div>\n              <SectionTitle title=\"Open new vaults\" />\n              <DataView\n                fields={['Token', 'contract', 'manage']}\n                entries={tokensToOpen}\n                renderEntry={({ oToken, oTokenName }) => [\n                  oTokenName,\n                  <IdentityBadge entity={oToken} shorten={false} />,\n                  <OpenVaultButton oToken={oToken} user={user} />,\n                ]}\n              />\n            </div>\n          ) : (\n            <></>\n          )}\n        </>\n      ) : (\n        // Not connected to wallet\n        <Comment text=\"Please connect wallet to proceed.\" />\n      )}\n    </>\n  );\n}\n\nMyVaults.propTypes = {\n  user: PropTypes.string.isRequired,\n};\n\nexport default MyVaults;\n","import PropTypes from 'prop-types';\n\nexport const vault = PropTypes.shape({\n  owner: PropTypes.string,\n  oTokensIssued: PropTypes.string,\n  collateral: PropTypes.string,\n});\n\n// export const detailVault = PropTypes.shape({\n//   oTokensIssued: PropTypes.string,\n//   collateral: PropTypes.string,\n// });\n\nexport const option = PropTypes.shape({\n  addr: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  symbol: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  decimals: PropTypes.number.isRequired,\n  oracle: PropTypes.string.isRequired,\n  collateral: PropTypes.string.isRequired,\n  underlying: PropTypes.string.isRequired,\n  strike: PropTypes.string.isRequired,\n  strikePrice: PropTypes.number.isRequired,\n  minRatio: PropTypes.number.isRequired,\n  exchange: PropTypes.string.isRequired,\n  uniswapExchange: PropTypes.string.isRequired,\n  expiry: PropTypes.number.isRequired,\n});\n","import React, { useState, useMemo } from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n  Header,\n  Button,\n  Modal,\n  Box,\n  Split,\n  TextInput,\n  IdentityBadge,\n  DataView,\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\n\nimport * as myType from '../types';\nimport { exercise } from '../../utils/web3';\nimport { PriceSection } from '../common';\nimport { getUnderlyingRequiredToExercise, getBalance, getTokenBalance } from '../../utils/infura';\nimport {\n  toTokenUnitsBN, toBaseUnitBN, formatDigits, compareVaultIssued,\n} from '../../utils/number';\n\n\n/**\n *\n * @param {{\n * oToken: string,\n * option: { decimals: number, underlying:string }\n * collateralDecimals: Number\n * underlyingDecimals: Number\n * underlyingSymbol: string\n * vaults: { collateral:string, oTokensIssued: string, owner:string, symbol:string }[]\n * underlyingIsETH: boolean\n * }} param0\n */\nfunction ExerciseModal({\n  user,\n  oToken,\n  option,\n  vaults,\n  collateralDecimals,\n  underlyingDecimals,\n  underlyingSymbol,\n  underlyingIsETH,\n}) {\n  const [userUnderlyingBalance, setUserUnderlyingBalance] = useState(new BigNumber(0));\n  const [userOTokenBalance, setUserOTokenBalance] = useState(new BigNumber(0));\n\n  const [opened, setOpened] = useState(false);\n\n  const [exerciseAmount, setExerciseAmount] = useState(new BigNumber(0));\n  const [underlyringRequired, setUnderlyringRequired] = useState(new BigNumber(0));\n\n  const nonEmptyVaults = vaults\n    .filter((vault) => parseInt(vault.collateral, 10) > 0)\n    .sort(compareVaultIssued);\n\n  const [selectedIndexes, setSelectedIndexes] = useState([]);\n  const [selectedHasEnoughCollateral, setHasEnoughCollateral] = useState(false);\n\n  const open = () => setOpened(true);\n  const close = () => setOpened(false);\n\n  // Update user balance\n  useMemo(async () => {\n    if (!user) return;\n    if (!opened) return;\n    let userUnderlying;\n    if (underlyingIsETH) {\n      userUnderlying = new BigNumber(await getBalance(user));\n    } else {\n      userUnderlying = toTokenUnitsBN(\n        await getTokenBalance(option.underlying, user),\n        underlyingDecimals,\n      );\n    }\n    const userOTkns = toTokenUnitsBN(await getTokenBalance(oToken, user), option.decimals);\n\n    setUserUnderlyingBalance(userUnderlying);\n    setUserOTokenBalance(userOTkns);\n  }, [oToken, option.decimals, option.underlying, underlyingDecimals, underlyingIsETH, user, opened]);\n\n  const onSelectEntries = (entries, indexes) => {\n    setSelectedIndexes(indexes);\n    checkHasEnoughToken(entries);\n  };\n\n  /**\n   * Set selectedHasEnoughCollateral according to selected entries\n   * @param {{oTokenIssued: string}[]} entries\n   */\n  const checkHasEnoughToken = (entries) => {\n    const sumIssued = entries.reduce(\n      (accumulator, current) => accumulator.plus(new BigNumber(current.oTokensIssued)), new BigNumber(0),\n    );\n    if (sumIssued.gt(new BigNumber(0)) && sumIssued.gte(toBaseUnitBN(exerciseAmount, option.decimals))) {\n      setHasEnoughCollateral(true);\n    } else {\n      setHasEnoughCollateral(false);\n    }\n  };\n\n  const onChangeExerciseAmt = async (amount) => {\n    if (!amount) {\n      setExerciseAmount(new BigNumber(0));\n      setUnderlyringRequired(new BigNumber(0));\n      return;\n    }\n    const exeAmtBN = new BigNumber(amount);\n    setExerciseAmount(exeAmtBN);\n    const underlyingRawAmt = await getUnderlyingRequiredToExercise(\n      oToken,\n      toBaseUnitBN(exeAmtBN, option.decimals).toString(),\n    );\n    const underlyingRequired = toTokenUnitsBN(underlyingRawAmt, underlyingDecimals);\n    setUnderlyringRequired(underlyingRequired);\n\n    // check current selection has enought tokens\n    const entries = selectedIndexes.map((index) => nonEmptyVaults[index]);\n    checkHasEnoughToken(entries);\n  };\n\n  return (\n    <>\n      {/* Button */}\n      <Button onClick={open} label=\"Claim\" />\n\n      {/* Modal */}\n      <Modal width={800} padding={50} visible={opened} onClose={close}>\n        <Header\n          primary=\"Exercise Option\"\n          secondary={(\n            <div style={{ display: 'flex' }}>\n              <PriceSection\n                label=\"Balance:\"\n                amt={userOTokenBalance.toNumber()}\n                symbol={option.symbol}\n                forceDisplay\n              />\n              <PriceSection label=\" +\" amt={userUnderlyingBalance.toNumber()} symbol={underlyingSymbol} />\n            </div>\n          )}\n        />\n        <Box heading=\"Amount to Exercise\">\n          <Split\n            primary={(\n              <>\n                <TextInput\n                  type=\"number\"\n                  wide\n                  adornment={option.symbol}\n                  adornmentPosition=\"end\"\n                  value={exerciseAmount.toNumber()}\n                  onChange={(event) => onChangeExerciseAmt(event.target.value)}\n                />\n              </>\n            )}\n            secondary={(\n              <div style={{ paddingTop: 5 }}>\n                <PriceSection\n                  label=\"+ Underlyring\"\n                  amt={underlyringRequired.toNumber()}\n                  symbol={underlyingSymbol}\n                />\n              </div>\n            )}\n          />\n        </Box>\n        <DataView\n          mode=\"table\"\n          renderSelectionCount={(count) => `${count} vaults selected`}\n          fields={['Owner', 'Issued', 'collateral']}\n          entries={nonEmptyVaults}\n          entriesPerPage={5}\n          selection={selectedIndexes}\n          onSelectEntries={onSelectEntries}\n          renderEntry={({ owner, collateral, oTokensIssued }) => [\n            <IdentityBadge entity={owner} />,\n            formatDigits(toTokenUnitsBN(oTokensIssued, option.decimals).toNumber(), 5),\n            formatDigits(toTokenUnitsBN(collateral, collateralDecimals).toNumber(), 5),\n          ]}\n        />\n        <br />\n        <Button\n          label=\"Exercise\"\n          disabled={!selectedHasEnoughCollateral}\n          wide\n          onClick={async () => {\n            const vaultowners = selectedIndexes.map((index) => vaults[index].owner);\n            exercise(\n              oToken,\n              option.underlying,\n              toBaseUnitBN(exerciseAmount, option.decimals).toString(),\n              vaultowners,\n            );\n          }}\n        />\n      </Modal>\n    </>\n  );\n}\n\nExerciseModal.propTypes = {\n  user: PropTypes.string.isRequired,\n  oToken: PropTypes.string.isRequired,\n  option: myType.option.isRequired,\n  vaults: PropTypes.arrayOf(myType.vault).isRequired,\n  collateralDecimals: PropTypes.number.isRequired,\n  underlyingDecimals: PropTypes.number.isRequired,\n  underlyingSymbol: PropTypes.string.isRequired,\n  underlyingIsETH: PropTypes.bool.isRequired,\n};\n\nexport default ExerciseModal;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Header,\n  Button,\n  Modal,\n  Box,\n  Split,\n  TextInput,\n  IdentityBadge,\n  IconEthereum,\n  IconConnect,\n  DataView,\n  useToast,\n  Tag,\n} from '@aragon/ui';\n\nimport * as MyPTypes from '../types';\nimport { RatioTag, Comment } from '../common';\n\nimport {\n  liquidate,\n  addERC20Collateral,\n  addETHCollateral,\n  kollateralLiquidate,\n} from '../../utils/web3';\nimport { getMaxLiquidatable } from '../../utils/infura';\nimport { toTokenUnitsBN, toBaseUnitBN, formatDigits } from '../../utils/number';\nimport { KETH, DAI, USDC } from '../../constants/contracts';\n\n/**\n *\n * @param {{ option:{\n * decimals:number,\n * exchange:string, collateral:string, symbol:string}\n * oTokensIssued: string collateralDecimals:Number, exchange:string}} param0\n */\nfunction VaultModal({\n  option,\n  useCollateral,\n  oToken,\n  owner,\n  collateral, // amount of collateral of this vault\n  isSafe,\n  oTokensIssued,\n  ratio,\n  collateralIsETH,\n  collateralDecimals,\n}) {\n  const toast = useToast();\n  const [opened, setOpened] = useState(false);\n  const [addValue, setAddValue] = useState(0);\n  const [liquidateAmt, setLiquidateAmt] = useState(0);\n  const open = () => setOpened(true);\n  const close = () => setOpened(false);\n\n  useEffect(() => {\n    let isCancelled = false;\n    async function getData() {\n      if (!opened) return;\n      const maxLiquidatable = await getMaxLiquidatable(oToken, owner);\n      if (!isCancelled) {\n        setLiquidateAmt(toTokenUnitsBN(maxLiquidatable, option.decimals).toNumber());\n      }\n    }\n    getData();\n\n    return () => {\n      isCancelled = true;\n    };\n  }, [option.decimals, oToken, opened, owner]);\n\n  return (\n    <>\n      <Button onClick={open} label=\"More\" />\n      <Modal width={900} padding={50} visible={opened} onClose={close}>\n        <Header primary=\"Access Position\" />\n\n        <DataView\n          fields={['Owner', 'Collateral', 'Issued', 'ratio', 'Status']}\n          entries={[{\n            collateral, isSafe, oTokensIssued, ratio, owner,\n          }]}\n          entriesPerPage={1}\n          renderEntry={(vault) => [\n            <IdentityBadge entity={vault.owner} shorten />,\n            formatDigits(toTokenUnitsBN(vault.collateral, collateralDecimals), 5),\n            formatDigits(toTokenUnitsBN(vault.oTokensIssued, option.decimals), 5),\n            formatDigits(vault.ratio, 4),\n            RatioTag({ isSafe: vault.isSafe, ratio, useCollateral }),\n          ]}\n        />\n\n        <br />\n        <Box heading=\"Add Collateral\">\n          <Split\n            primary={(\n              <TextInput\n                type=\"number\"\n                wide\n                adornment={<IconEthereum />}\n                adornmentPosition=\"end\"\n                value={addValue}\n                onChange={(event) => {\n                  setAddValue(event.target.value);\n                }}\n              />\n            )}\n            secondary={(\n              <Button\n                label=\"Add Collateral\"\n                wide\n                onClick={() => {\n                  if (collateralIsETH) {\n                    addETHCollateral(oToken, owner, addValue);\n                  } else {\n                    addERC20Collateral(\n                      option.collateral,\n                      oToken,\n                      owner,\n                      toBaseUnitBN(addValue, collateralDecimals).toString(),\n                    );\n                  }\n                }}\n              />\n            )}\n          />\n        </Box>\n\n        {useCollateral ? (\n          <Box heading=\"Liquidate\">\n            <Comment text={`Liquidate with your ${option.symbol}`} />\n            <Split\n              primary={(\n                <>\n                  <TextInput\n                    wide\n                    type=\"number\"\n                    value={liquidateAmt}\n                    onChange={(event) => {\n                      setLiquidateAmt(event.target.value);\n                    }}\n                  />\n                </>\n              )}\n              secondary={(\n                <>\n                  <Button\n                    wide\n                    disabled={isSafe}\n                    label=\"Liquidate\"\n                    onClick={() => {\n                      liquidate(oToken, owner, toBaseUnitBN(liquidateAmt, option.decimals)).catch(\n                        (error) => {\n                          toast(error.toString());\n                        },\n                      );\n                    }}\n                  />\n                </>\n              )}\n            />\n            <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n              <Comment text=\" Or \" />\n            </div>\n            <Comment text={(\n              <>\n                <Tag> beta </Tag>\n                Liquidate with Kollateral Flashloan\n              </>\n              )}\n            />\n\n            <div style={{ display: 'flex' }}>\n              <Button\n                icon={<IconConnect />}\n                label=\"DAI\"\n                disabled={isSafe}\n                onClick={() => {\n                  kollateralLiquidate(oToken, option.exchange, owner, DAI).catch((error) => {\n                    toast(error.toString());\n                  });\n                }}\n                wide\n                selected\n              />\n              <Button\n                icon={<IconConnect />}\n                label=\"USDC\"\n                disabled={isSafe}\n                onClick={() => {\n                  kollateralLiquidate(oToken, option.exchange, owner, USDC).catch((error) => {\n                    toast(error.toString());\n                  });\n                }}\n                wide\n              />\n              <Button\n                icon={<IconConnect />}\n                label=\"ETH\"\n                disabled={isSafe}\n                onClick={() => {\n                  kollateralLiquidate(oToken, option.exchange, owner, KETH).catch((error) => {\n                    toast(error.toString());\n                  });\n                }}\n                wide\n              />\n            </div>\n          </Box>\n        ) : (\n          <></>\n        )}\n      </Modal>\n    </>\n  );\n}\n\nVaultModal.propTypes = {\n  option: MyPTypes.option.isRequired,\n  useCollateral: PropTypes.bool.isRequired,\n  oToken: PropTypes.string.isRequired,\n  owner: PropTypes.string.isRequired,\n  collateral: PropTypes.string.isRequired,\n  isSafe: PropTypes.bool.isRequired,\n  oTokensIssued: PropTypes.string.isRequired,\n  ratio: PropTypes.number.isRequired,\n  collateralIsETH: PropTypes.bool.isRequired,\n  collateralDecimals: PropTypes.number.isRequired,\n};\n\nexport default VaultModal;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { DataView, IdentityBadge } from '@aragon/ui';\nimport VaultModal from './VaultModal';\nimport { SectionTitle, RatioTag } from '../common';\nimport * as MyPTypes from '../types';\nimport { formatDigits, compareVaultRatio, toTokenUnitsBN } from '../../utils/number';\nimport { calculateRatio, calculateStrikeValueInCollateral } from '../../utils/calculation';\n\n\nfunction VaultOwnerList({\n  oToken, user, vaults, option, collateralIsETH, collateralDecimals,\n}) {\n  const vaultUsesCollateral = option.collateral !== option.strike;\n\n  const [isLoading, setIsLoading] = useState(true);\n  const [vaultsWithDetail, setVaultDetail] = useState([]);\n\n  const [page, setPage] = useState(0);\n\n  useEffect(() => {\n    let isCancelled = false;\n    const updateInfo = async () => {\n      if (vaults.length === 0) return;\n      const {\n        strike, minRatio, strikePrice, oracle, collateral,\n      } = option;\n\n      const strikeValueInCollateral = await calculateStrikeValueInCollateral(\n        collateral,\n        strike,\n        oracle,\n      );\n      const vaultDetail = vaults\n        .map((vault) => {\n          if (vault.oTokensIssued === '0') {\n            return {\n              owner: vault.owner,\n              oTokensIssued: vault.oTokensIssued,\n              collateral: vault.collateral,\n              ratio: Infinity,\n              useCollateral: vaultUsesCollateral,\n              isSafe: true,\n            };\n          }\n          const ratio = calculateRatio(\n            vault.collateral,\n            vault.oTokensIssued,\n            strikePrice,\n            strikeValueInCollateral,\n          );\n          return {\n            owner: vault.owner,\n            oTokensIssued: vault.oTokensIssued,\n            collateral: vault.collateral,\n            ratio,\n            useCollateral: vaultUsesCollateral,\n            isSafe: ratio > minRatio,\n            oToken,\n          };\n        })\n        .sort(compareVaultRatio);\n\n      if (!isCancelled) {\n        setVaultDetail(vaultDetail);\n        setIsLoading(false);\n      }\n    };\n\n    updateInfo();\n    const id = setInterval(updateInfo, 12000);\n\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [collateralDecimals, collateralIsETH, oToken, option, user, vaultUsesCollateral, vaults]);\n\n  return (\n    <>\n      <SectionTitle title=\"All Vaults\" />\n      <DataView\n        page={page}\n        onPageChange={setPage}\n        status={isLoading ? 'loading' : 'default'}\n        fields={['Owner', 'collateral', 'Issued', 'RATIO', 'Status', '']}\n        entries={vaultsWithDetail}\n        entriesPerPage={5}\n        renderEntry={({\n          owner, collateral, oTokensIssued, ratio, isSafe, useCollateral,\n        }) => [\n          <IdentityBadge entity={owner} shorten />,\n          formatDigits(\n            toTokenUnitsBN(collateral, collateralDecimals).toNumber(),\n            6,\n          ),\n          formatDigits(\n            toTokenUnitsBN(oTokensIssued, option.decimals).toNumber(),\n            6,\n          ),\n          formatDigits(ratio, 5),\n          RatioTag({ isSafe, ratio, useCollateral }),\n          <VaultModal\n            option={option}\n            oToken={oToken}\n            owner={owner}\n            collateral={collateral}\n            collateralDecimals={collateralDecimals}\n            isSafe={isSafe}\n            useCollateral={useCollateral}\n            collateralIsETH={collateralIsETH}\n            oTokensIssued={oTokensIssued}\n            ratio={ratio}\n          />,\n        ]}\n      />\n    </>\n  );\n}\n\nVaultOwnerList.propTypes = {\n  oToken: PropTypes.string.isRequired,\n  user: PropTypes.string.isRequired,\n  vaults: PropTypes.arrayOf(MyPTypes.vault).isRequired,\n  option: MyPTypes.option.isRequired,\n  collateralIsETH: PropTypes.bool.isRequired,\n  collateralDecimals: PropTypes.number.isRequired,\n};\n\nexport default VaultOwnerList;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Box, Split, IdentityBadge } from '@aragon/ui';\n\nimport BigNumber from 'bignumber.js';\nimport * as MyPTypes from '../types';\n\nimport { getERC20Info, getBalance, getTokenBalance } from '../../utils/infura';\nimport { toTokenUnitsBN } from '../../utils/number';\n\nfunction OptionOverview({\n  oToken, tokenSymbol, option, collateralIsETH, collateralDecimals,\n}) {\n  const [totalCollateral, setTotalCollateral] = useState(new BigNumber(0));\n  const [totalSupply, setTotalSupply] = useState('0');\n\n  useEffect(() => {\n    let isCancelled = false;\n    async function init() {\n      let totalCollt;\n      if (collateralIsETH) {\n        totalCollt = new BigNumber(await getBalance(oToken));\n      } else {\n        const rawCollateralBalance = await getTokenBalance(option.collateral, oToken);\n        totalCollt = toTokenUnitsBN(rawCollateralBalance, collateralDecimals);\n      }\n      const { totalSupply: supply } = await getERC20Info(oToken);\n      if (!isCancelled) {\n        setTotalCollateral(totalCollt);\n        setTotalSupply(supply);\n      }\n    }\n    init();\n\n    return () => {\n      isCancelled = true;\n    };\n  }, [collateralDecimals, collateralIsETH, oToken, option.collateral]);\n\n  return (\n    <>\n      <Split\n        primary={(\n          <Split\n            primary={(\n              <Box heading=\"contract\" padding={15}>\n                <IdentityBadge entity={oToken} shorten={false} />\n              </Box>\n            )}\n            secondary={(\n              <Box heading=\"Total Collateral\" padding={15}>\n                {totalCollateral.toNumber()}\n              </Box>\n            )}\n          />\n        )}\n        secondary={(\n          <Box heading=\"total supply\" padding={15}>\n            {totalSupply}\n            {' '}\n            {tokenSymbol}\n          </Box>\n        )}\n      />\n    </>\n  );\n}\n\nOptionOverview.propTypes = {\n  oToken: PropTypes.string.isRequired,\n  tokenSymbol: PropTypes.string.isRequired,\n  option: MyPTypes.option.isRequired,\n  collateralIsETH: PropTypes.bool.isRequired,\n  collateralDecimals: PropTypes.number.isRequired,\n};\n\nexport default OptionOverview;\n","import React, { useMemo, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useParams } from 'react-router-dom';\nimport { Header } from '@aragon/ui';\n\nimport ExerciseModal from './ExerciseModal';\nimport VaultsList from './VaultsList';\nimport OptionInfoBox from './OptionInfoBox';\n\nimport { getDecimals, getERC20Symbol } from '../../utils/infura';\nimport { getAllVaultsForOption } from '../../utils/graph';\n\nimport { options, ETH_ADDRESS } from '../../constants/contracts';\n\nfunction OptionPage({ user }) {\n  const { token } = useParams();\n  const option = options.find((o) => o.addr === token);\n\n  const [vaults, setVaults] = useState([]);\n\n  const [collateralDecimals, setCollateralDecimals] = useState(18);\n  const [underlyingDecimals, setUnderlyingDecimals] = useState(18);\n  const [underlyingSymbol, setUnderlyingSymbol] = useState('ETH');\n\n  const collateralIsETH = option.collateral === ETH_ADDRESS;\n  const underlyingIsETH = option.underlying === ETH_ADDRESS;\n\n  useMemo(async () => {\n    if (!collateralIsETH) {\n      const colltDecimals = await getDecimals(option.collateral);\n      setCollateralDecimals(colltDecimals);\n    }\n    if (!underlyingIsETH) {\n      const [_decimals, _symbol] = await Promise.all([\n        getDecimals(option.underlying),\n        getERC20Symbol(option.underlying),\n      ]);\n      setUnderlyingDecimals(_decimals);\n      setUnderlyingSymbol(_symbol);\n    }\n\n    // Get All vaults once\n    const allVaults = await getAllVaultsForOption(token);\n    setVaults(allVaults);\n  }, [collateralIsETH, option.collateral, option.underlying, token, underlyingIsETH]);\n\n  return (\n    <>\n      <Header\n        primary={option.name}\n        secondary={(\n          <ExerciseModal\n            user={user}\n            oToken={token}\n            option={option}\n            collateralDecimals={collateralDecimals}\n            underlyingDecimals={underlyingDecimals}\n            underlyingSymbol={underlyingSymbol}\n            underlyingIsETH={underlyingIsETH}\n            vaults={vaults}\n          />\n        )}\n      />\n      {/* Basic Info Header */}\n      <OptionInfoBox\n        tokenSymbol={option.symbol}\n        oToken={token}\n        user={user}\n        vaults={vaults}\n        option={option}\n        collateralDecimals={collateralDecimals}\n        collateralIsETH={collateralIsETH}\n      />\n      {/* List of Vaults */}\n      <VaultsList\n        oToken={token}\n        user={user}\n        vaults={vaults}\n        collateralDecimals={collateralDecimals}\n        collateralIsETH={collateralIsETH}\n        option={option}\n      />\n    </>\n  );\n}\n\nOptionPage.propTypes = {\n  user: PropTypes.string.isRequired,\n};\n\nexport default OptionPage;\n","import React from 'react';\n\nimport PropTypes from 'prop-types';\nimport { BalanceBlock, RatioTag, HelperText } from '../common';\nimport { formatDigits, toTokenUnitsBN } from '../../utils/number';\nimport * as MyPTypes from '../types';\n\nconst HeaderDashboard = ({\n  ratio, minRatio, symbol, vault, decimals, newRatio, collateralDecimals, useCollateral,\n}) => {\n  const tokenInUnit = vault.oTokensIssued ? toTokenUnitsBN(vault.oTokensIssued, decimals).toNumber() : '0';\n  const collateralBalance = vault.collateral\n    ? toTokenUnitsBN(vault.collateral, collateralDecimals).toString()\n    : '0';\n\n  return (\n    <div style={{ padding: '2%', display: 'flex', alignItems: 'center' }}>\n      <div style={{ width: '30%' }}>\n        <BalanceBlock asset=\"Total Collateral\" balance={formatDigits(collateralBalance, 6)} />\n      </div>\n      <div style={{ width: '50%' }}>\n        <BalanceBlock asset={`${symbol} Issued`} balance={tokenInUnit.toString()} />\n      </div>\n      <div style={{ width: '20%' }}>\n        <>\n          <div style={{ fontSize: 14, padding: 3 }}>\n            Current Ratio\n            {' '}\n            {ratio > 0 ? <RatioTag isSafe={ratio >= minRatio} ratio={ratio} useCollateral={useCollateral} /> : <></>}\n          </div>\n          <div style={{ fontSize: 24, padding: 3 }}>\n            <span style={{ fontSize: 24 }}>{formatDigits(ratio, 5).split('.')[0]}</span>\n.\n            <span style={{ fontSize: 18 }}>\n              {formatDigits(ratio, 5).split('.')[1]}\n              {' '}\n            </span>\n            {minRatio > 0 ? (\n              <span style={{ fontSize: 16 }}>\n                {' '}\n/\n                {' '}\n                {minRatio}\n                {' '}\n              </span>\n            ) : ''}\n          </div>\n          <>\n            {' '}\n            {newRatio === ratio ? '' : <HelperText label=\"New Ratio\" amt={newRatio.toString()} />}\n            {' '}\n          </>\n        </>\n      </div>\n    </div>\n  );\n};\n\nHeaderDashboard.propTypes = {\n  ratio: PropTypes.number.isRequired,\n  minRatio: PropTypes.number.isRequired,\n  symbol: PropTypes.string.isRequired,\n  vault: MyPTypes.vault.isRequired,\n  decimals: PropTypes.number.isRequired,\n  newRatio: PropTypes.number.isRequired,\n  collateralDecimals: PropTypes.number.isRequired,\n  useCollateral: PropTypes.bool.isRequired,\n};\n\nexport default HeaderDashboard;\n","import React, { useState, useMemo } from 'react';\nimport BigNumber from 'bignumber.js';\nimport PropTypes from 'prop-types';\nimport {\n  Box, TextInput, Button, IconCirclePlus, IconCircleMinus,\n} from '@aragon/ui';\nimport { getDecimals, getERC20Symbol } from '../../utils/infura';\nimport { addETHCollateral, addERC20Collateral, removeCollateral } from '../../utils/web3';\n\nimport { BalanceBlock, MaxButton } from '../common';\n\nimport { formatDigits, toTokenUnitsBN, toBaseUnitBN } from '../../utils/number';\nimport { calculateRatio } from '../../utils/calculation';\nimport { ETH_ADDRESS } from '../../constants/contracts';\nimport * as MyPTypes from '../types';\n\n/**\n *\n * @param {{isOwner: boolean, strikePrice:number, strikeValue:BigNumber, collateralAssetBalance: BigNumber }} param0\n */\nfunction CollateralManagement({\n  isOwner,\n  vault,\n  collateralAsset,\n  collateralAssetBalance, // Bignumber, / token unit\n  token,\n  owner,\n  strikeValue,\n  strikePrice,\n  minRatio,\n  setNewRatio,\n}) {\n  const [addCollateralAmt, setAddCollateralAmt] = useState(0); // in token unit\n  const [removeCollateralAmt, setRemoveCollateralAmt] = useState(0); // in token unit\n\n  const [collateralDecimals, setCollateralDecimals] = useState(18);\n  const [collateralSymbol, setCollateralSymbol] = useState(0);\n\n  const collateralIsETH = collateralAsset === ETH_ADDRESS;\n\n  useMemo(async () => {\n    if (collateralIsETH) return;\n    const decimals = await getDecimals(collateralAsset);\n    const symbol = await getERC20Symbol(collateralAsset);\n    setCollateralDecimals(decimals);\n    setCollateralSymbol(symbol);\n  }, [collateralAsset, collateralIsETH]);\n\n  /**\n   * @param {number} newCollateral in wei\n   */\n  // eslint-disable-next-line consistent-return\n  const updateNewRatio = (newCollateral) => {\n    if (!newCollateral || newCollateral <= 0) return 0;\n    const str = newCollateral.toString();\n    const newRatio = calculateRatio(str, vault.oTokensIssued, strikePrice, strikeValue);\n    setNewRatio(formatDigits(newRatio, 5));\n  };\n\n  return (\n    <Box heading=\"Collateral\">\n      <div style={{ display: 'flex' }}>\n        {/* balance */}\n        <div style={{ width: '30%' }}>\n          {BalanceBlock({\n            asset: collateralIsETH ? 'Your ETH Balance' : `Your ${collateralSymbol} Balance`,\n            balance: formatDigits(collateralAssetBalance.toString(), 6),\n          })}\n        </div>\n        {/* Add collateral */}\n        <div style={{ width: '32%', paddingTop: '2%' }}>\n          <div style={{ display: 'flex' }}>\n            <div style={{ width: '60%' }}>\n              <>\n                <TextInput\n                  type=\"number\"\n                  wide\n                  value={addCollateralAmt}\n                  onChange={(event) => {\n                    const amt = event.target.value;\n                    if (amt === '') {\n                      setAddCollateralAmt(0);\n                      return;\n                    }\n                    setAddCollateralAmt(amt);\n                    const amtRaw = toBaseUnitBN(amt, collateralDecimals);\n                    const newCollateralInWei = new BigNumber(vault.collateral).plus(amtRaw).toNumber();\n                    updateNewRatio(newCollateralInWei);\n                  }}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setAddCollateralAmt(collateralAssetBalance.toNumber());\n                    const collateralBalanceRaw = toBaseUnitBN(collateralAssetBalance, collateralDecimals);\n                    const newCollateral = new BigNumber(vault.collateral).plus(collateralBalanceRaw).toNumber();\n                    updateNewRatio(newCollateral);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{ width: '40%' }}>\n              <Button\n                wide\n                icon={<IconCirclePlus />}\n                label=\"Add\"\n                onClick={() => {\n                  if (collateralIsETH) {\n                    addETHCollateral(token, owner, addCollateralAmt);\n                  } else {\n                    addERC20Collateral(\n                      collateralAsset,\n                      token,\n                      owner,\n                      toBaseUnitBN(addCollateralAmt, collateralDecimals),\n                    );\n                  }\n                }}\n              />\n            </div>\n          </div>\n        </div>\n        <div style={{ width: '6%' }} />\n        {/* Remove collateral */}\n        <div style={{ width: '32%', paddingTop: '2%' }}>\n          <div style={{ display: 'flex' }}>\n            <div style={{ width: '60%' }}>\n              <>\n                <TextInput\n                  type=\"number\"\n                  wide\n                  value={removeCollateralAmt}\n                  onChange={(event) => {\n                    const amt = event.target.value;\n                    if (amt === '') {\n                      setRemoveCollateralAmt(0);\n                      return;\n                    }\n                    setRemoveCollateralAmt(amt);\n                    const amtRaw = toBaseUnitBN(amt, collateralDecimals);\n                    const newCollateralWei = new BigNumber(vault.collateral).minus(amtRaw).toNumber();\n                    updateNewRatio(newCollateralWei);\n                  }}\n                />\n                <MaxButton\n                  onClick={() => {\n                    if (strikeValue.toNumber() <= 0) return;\n                    const strikePriceBN = new BigNumber(strikePrice);\n                    const tokenIssuedBN = new BigNumber(vault.oTokensIssued);\n                    const minRatioBN = new BigNumber(minRatio);\n                    const minCollateral = strikePriceBN.times(tokenIssuedBN).times(minRatioBN).times(strikeValue);\n                    // const minValueInStrike = strikePrice * vault.oTokensIssued * minRatio;\n                    // const minCollateral = minValueInStrike * strikeValue;\n                    const maxToRemove = new BigNumber(vault.collateral).minus(minCollateral).toString();\n                    const maxToRemoveInTokenUnit = toTokenUnitsBN(maxToRemove, collateralDecimals).toNumber();\n                    setRemoveCollateralAmt(maxToRemoveInTokenUnit);\n                    setNewRatio(minRatio);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{ width: '40%' }}>\n              <Button\n                disabled={!isOwner}\n                wide\n                icon={<IconCircleMinus />}\n                label=\"Remove\"\n                onClick={() => {\n                  removeCollateral(\n                    collateralAsset,\n                    token,\n                    toBaseUnitBN(removeCollateralAmt, collateralDecimals).toString(),\n                  );\n                }}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </Box>\n  );\n}\n\nCollateralManagement.propTypes = {\n  isOwner: PropTypes.bool.isRequired,\n  vault: MyPTypes.vault.isRequired,\n  collateralAsset: PropTypes.string.isRequired,\n  collateralAssetBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  token: PropTypes.string.isRequired,\n  owner: PropTypes.string.isRequired,\n  strikeValue: PropTypes.instanceOf(BigNumber).isRequired,\n  strikePrice: PropTypes.number.isRequired,\n  minRatio: PropTypes.number.isRequired,\n  setNewRatio: PropTypes.func.isRequired,\n};\n\nexport default CollateralManagement;\n","import React, { useState } from 'react';\nimport BigNumber from 'bignumber.js';\nimport PropTypes from 'prop-types';\nimport {\n  Box, TextInput, Button, IconCirclePlus, IconCircleMinus,\n} from '@aragon/ui';\nimport { burnOToken, issueOToken } from '../../utils/web3';\nimport { BalanceBlock, MaxButton } from '../common';\nimport { toBaseUnitBN, toTokenUnitsBN } from '../../utils/number';\nimport { calculateRatio } from '../../utils/calculation';\nimport * as MyPTypes from '../types';\n/**\n *\n * @param {{\n * strikeValue: BigNumber,\n * tokenBalance: BigNumber,\n * strikePrice: Number,\n * decimals: Number\n * }} param0\n */\nfunction IssuedTokenManagement({\n  isOwner,\n  vault,\n  tokenBalance,\n  token,\n  strikeValue,\n  strikePrice,\n  minRatio,\n  decimals,\n  symbol,\n  setNewRatio,\n}) {\n  const [issueAmt, setIssueAmt] = useState(new BigNumber(0));\n  const [burnAmt, setBurnAmt] = useState(new BigNumber(0));\n\n  /**\n   *\n   * @param {BigNumber} newAmt in raw amt\n   */\n  const updateNewRatio = (newAmt) => {\n    if (newAmt.lte(new BigNumber(0))) return;\n    const newRatio = calculateRatio(vault.collateral, newAmt, strikePrice, strikeValue);\n    setNewRatio(newRatio);\n  };\n\n  const onChangeIssueAmt = (intputAmt) => {\n    if (!intputAmt) {\n      setIssueAmt(new BigNumber(0));\n      return;\n    }\n    const amountBN = new BigNumber(intputAmt);\n    setIssueAmt(amountBN);\n    updateNewRatio(new BigNumber(vault.oTokensIssued).plus(toBaseUnitBN(amountBN, decimals)));\n  };\n\n  const onClickIssueToken = () => {\n    issueOToken(\n      token,\n      toBaseUnitBN(issueAmt, decimals).toString(),\n    );\n  };\n\n  const onChangeBurnAmt = (intputAmt) => {\n    if (!intputAmt) {\n      setBurnAmt(new BigNumber(0));\n      return;\n    }\n    const amountBN = new BigNumber(intputAmt);\n    updateNewRatio(new BigNumber(vault.oTokensIssued).minus(toBaseUnitBN(amountBN, decimals)));\n    setBurnAmt(amountBN);\n  };\n\n  const onClickBurnToken = () => {\n    burnOToken(\n      token,\n      toBaseUnitBN(burnAmt, decimals).toString(),\n    );\n  };\n\n  return (\n    <Box heading=\"Total Issued\">\n      <div style={{ display: 'flex' }}>\n        {/* total Issued */}\n        <div style={{ width: '30%' }}>\n          <BalanceBlock\n            asset={`Owner ${symbol} Balance `}\n            balance={tokenBalance.toString()}\n          />\n        </div>\n        {/* Issue More Token */}\n        <div style={{ width: '32%', paddingTop: '2%' }}>\n          <div style={{ display: 'flex' }}>\n            <div style={{ width: '60%' }}>\n              <>\n                <TextInput\n                  type=\"number\"\n                  wide\n                  value={issueAmt}\n                  onChange={(event) => onChangeIssueAmt(event.target.value)}\n                />\n                <MaxButton\n                  onClick={() => {\n                    if (strikePrice <= 0) return;\n                    // (vault.collateral) / (minRatio * strikePrice * strikeValue.toNumber());\n                    const maxTotal = new BigNumber(vault.collateral).div(\n                      new BigNumber(minRatio).times(new BigNumber(strikePrice)).times(strikeValue),\n                    );\n\n                    const maxToIssueRaw = maxTotal.minus(new BigNumber(vault.oTokensIssued));\n                    const maxToIssue = toTokenUnitsBN(maxToIssueRaw, decimals);\n                    setIssueAmt(maxToIssue);\n                    setNewRatio(minRatio);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{ width: '40%' }}>\n              <Button\n                disabled={!isOwner}\n                wide\n                icon={<IconCirclePlus />}\n                label=\"Issue\"\n                onClick={onClickIssueToken}\n              />\n            </div>\n          </div>\n        </div>\n        <div style={{ width: '6%' }} />\n        {/* Remove collateral */}\n        <div style={{ width: '32%', paddingTop: '2%' }}>\n          <div style={{ display: 'flex' }}>\n            <div style={{ width: '60%' }}>\n              <>\n                <TextInput\n                  type=\"number\"\n                  wide\n                  value={burnAmt}\n                  onChange={(event) => onChangeBurnAmt(event.target.value)}\n                />\n                <MaxButton\n                  onClick={() => {\n                    const issued = toTokenUnitsBN(vault.oTokensIssued, decimals);\n                    const maxToBurn = tokenBalance.lt(issued) ? tokenBalance : issued; // min (issued, tokenBalance)\n                    setBurnAmt(maxToBurn);\n                    updateNewRatio(issued.minus(maxToBurn));\n                  }}\n                />\n              </>\n            </div>\n            <div style={{ width: '40%' }}>\n              <Button\n                disabled={!isOwner}\n                wide\n                icon={<IconCircleMinus />}\n                label=\"Burn\"\n                onClick={onClickBurnToken}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </Box>\n  );\n}\n\nIssuedTokenManagement.propTypes = {\n  isOwner: PropTypes.bool.isRequired,\n  vault: MyPTypes.vault.isRequired,\n  tokenBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  token: PropTypes.string.isRequired,\n  strikeValue: PropTypes.instanceOf(BigNumber).isRequired,\n  strikePrice: PropTypes.number.isRequired,\n  minRatio: PropTypes.number.isRequired,\n  decimals: PropTypes.number.isRequired,\n  symbol: PropTypes.string.isRequired,\n  setNewRatio: PropTypes.func.isRequired,\n};\n\nexport default IssuedTokenManagement;\n","import React, { useState, useMemo, useEffect } from 'react';\n\nimport {\n  Box, DataView, IdentityBadge, TransactionBadge, TextInput, Button,\n} from '@aragon/ui';\n\nimport PropTypes from 'prop-types';\nimport BigNumber from 'bignumber.js';\n\nimport { BalanceBlock, MaxButton } from '../common';\nimport { liquidate } from '../../utils/web3';\nimport { getMaxLiquidatable } from '../../utils/infura';\nimport { getLiquidationHistory } from '../../utils/graph';\nimport {\n  formatDigits, fromWei, toTokenUnitsBN, timeSince, toBaseUnitBN,\n} from '../../utils/number';\n\n/**\n *\n * @param {{userTokenBalance: BigNumber}} param0\n */\nfunction LiquidationHistory({\n  owner, token, isOwner, tokenDecimals, userTokenBalance,\n}) {\n  const [maxLiquidatable, setMaxLiquidatable] = useState(0);\n  const [isLoading, setIsLoading] = useState(true);\n  const [entries, setEntries] = useState([]);\n\n  const [amountToLiquidate, setAmtToLiquidate] = useState(0);\n\n  useEffect(() => {\n    async function updateLiquidatable() {\n      const maxToLiquidate = await getMaxLiquidatable(token, owner);\n      setMaxLiquidatable(toTokenUnitsBN(maxToLiquidate, tokenDecimals).toNumber());\n    }\n\n    updateLiquidatable();\n  });\n\n  useMemo(async () => {\n    async function updateList() {\n      const actions = await getLiquidationHistory(owner);\n      const actionsForThisVault = actions.filter(\n        (entry) => entry.vault.optionsContract.address === token,\n      ).sort((actionA, actionB) => {\n        if (actionA.timestamp > actionB.timestamp) return -1;\n        return 1;\n      });\n      setEntries(actionsForThisVault);\n      setIsLoading(false);\n    }\n    updateList();\n  }, [owner, token]);\n\n  return (\n    <>\n      {isOwner ? (\n        <></>\n      ) : (\n        <Box heading=\"Liquidate\">\n          <>\n            <div style={{ display: 'flex' }}>\n              {/* balance */}\n              <div style={{ width: '30%' }}>\n                <BalanceBlock asset=\"Max To Liquidate\" balance={maxLiquidatable} />\n              </div>\n              <div style={{ width: '70%', paddingTop: '2%' }}>\n                <div style={{ display: 'flex' }}>\n                  <div style={{ width: '60%' }}>\n                    <>\n                      <TextInput\n                        type=\"number\"\n                        wide\n                        value={amountToLiquidate}\n                        onChange={(event) => {\n                          setAmtToLiquidate(event.target.value);\n                        }}\n                      />\n                      <MaxButton\n                        onClick={() => {\n                          const maximum = Math.min(userTokenBalance.toNumber(), maxLiquidatable);\n                          setAmtToLiquidate(maximum);\n                        }}\n                      />\n                    </>\n                  </div>\n                  <div style={{ width: '40%' }}>\n                    <Button\n                      disabled={maxLiquidatable <= 0}\n                      label=\"Liquidate\"\n                      onClick={() => {\n                        const amtToLiquidate = toBaseUnitBN(\n                          amountToLiquidate,\n                          tokenDecimals,\n                        ).toString();\n                        liquidate(token, owner, amtToLiquidate);\n                      }}\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </>\n        </Box>\n      )}\n\n      {/* History Section */}\n      <Box heading=\"History\">\n        <DataView\n          status={isLoading ? 'loading' : 'default'}\n          fields={['Tx', 'Amount', 'Liquidator', 'Date']}\n          entries={entries}\n          entriesPerPage={4}\n          renderEntry={({\n            collateralToPay, liquidator, timestamp, transactionHash,\n          }) => [\n            <TransactionBadge transaction={transactionHash} />,\n            formatDigits(fromWei(collateralToPay), 5),\n            <IdentityBadge entity={liquidator} />,\n            timeSince(parseInt(timestamp, 10) * 1000),\n          ]}\n        />\n      </Box>\n    </>\n  );\n}\n\nLiquidationHistory.propTypes = {\n  owner: PropTypes.string.isRequired,\n  token: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  tokenDecimals: PropTypes.number.isRequired,\n  userTokenBalance: PropTypes.instanceOf(BigNumber).isRequired,\n};\nexport default LiquidationHistory;\n","import React, { useState, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Box, DataView, IdentityBadge, TransactionBadge,\n} from '@aragon/ui';\n\n\nimport { getExerciseHistory } from '../../utils/graph';\nimport { formatDigits, toTokenUnitsBN, timeSince } from '../../utils/number';\n\nfunction ExerciseHistory({\n  owner, token, collateralDecimals, tokenDecimals,\n}) {\n  const [isLoading, setIsLoading] = useState(true);\n  const [entries, setEntries] = useState([]);\n\n  useMemo(async () => {\n    const actions = await getExerciseHistory(owner, token);\n    setEntries(actions);\n    setIsLoading(false);\n  }, [owner, token]);\n\n  return (\n    <>\n      {/* History Section */}\n      <Box heading=\"History\">\n        <DataView\n          status={isLoading ? 'loading' : 'default'}\n          fields={['Tx', 'Collateral', 'oToken', 'Exerciser', 'Time']}\n          entries={entries}\n          entriesPerPage={4}\n          renderEntry={({\n            amtCollateralToPay, oTokensToExercise, exerciser, timestamp, transactionHash,\n          }) => [\n            <TransactionBadge transaction={transactionHash} />,\n            formatDigits(\n              toTokenUnitsBN(amtCollateralToPay, collateralDecimals).toNumber(),\n              5,\n            ),\n            formatDigits(\n              toTokenUnitsBN(oTokensToExercise, tokenDecimals).toNumber(),\n              5,\n            ),\n            <IdentityBadge entity={exerciser} />,\n            timeSince(parseInt(timestamp * 1000, 10)),\n          ]}\n        />\n      </Box>\n    </>\n  );\n}\n\nExerciseHistory.propTypes = {\n  owner: PropTypes.string.isRequired,\n  token: PropTypes.string.isRequired,\n  collateralDecimals: PropTypes.number.isRequired,\n  tokenDecimals: PropTypes.number.isRequired,\n};\n\nexport default ExerciseHistory;\n","import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport {\n  Header, Tabs, Box, Timer, Button,\n} from '@aragon/ui';\n\nimport BigNumber from 'bignumber.js';\nimport HeaderDashboard from './HeaderDashboard';\nimport CollateralManagement from './CollateralManagement';\nimport IssuedTokenManagement from './IssuedTokenManagement';\nimport LiquidationHistory from './Liquidation';\nimport ExerciseHistory from './Exercise';\n\nimport { toTokenUnitsBN } from '../../utils/number';\nimport { calculateRatio, calculateStrikeValueInCollateral } from '../../utils/calculation';\nimport { getTokenBalance, getBalance, getDecimals } from '../../utils/infura';\nimport { getAllVaultsForUser } from '../../utils/graph';\nimport { redeem } from '../../utils/web3';\n\nimport { options, ETH_ADDRESS } from '../../constants/contracts';\n\nfunction ManageVault({ user }) {\n  const { token, owner } = useParams();\n\n  const option = options.find((o) => o.addr === token);\n  const {\n    decimals, symbol, oracle, strike, strikePrice, minRatio, collateral, expiry,\n  } = option;\n\n  // Tab Navigation\n  const [tabSelected, setTabSelected] = useState(0);\n\n  const [vault, setVault] = useState({});\n  const [strikeValueInCollateral, setStrikeValue] = useState(new BigNumber(0));\n  const [ratio, setRatio] = useState(0);\n\n  const [ownerTokenBalance, setOwnerTokenBalance] = useState(new BigNumber(0));\n  const [userTokenBalance, setUserTokenBalance] = useState(new BigNumber(0));\n  const [userCollateralAssetBalance, setUserCollateralAssetBalance] = useState(new BigNumber(0));\n\n  // status\n  const [noVault, setNoVault] = useState(true);\n  const [newRatio, setNewRatio] = useState(ratio);\n\n  const [collateralDecimals, setCollateralDecimals] = useState(18);\n  const collateralIsETH = collateral === ETH_ADDRESS;\n\n  const vaultUsesCollateral = collateral !== strike;\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateInfo() {\n      const vaultToManage = (await getAllVaultsForUser(owner)).find(\n        (v) => v.optionsContract.address === token,\n      );\n      setNoVault(false);\n      const [_ownerTokenBalance, _userTokenBalance] = await Promise.all([\n        getTokenBalance(token, owner),\n        getTokenBalance(token, user),\n      ]);\n\n      // SetUserCollateralAmount\n      let collateralBalance = new BigNumber(0);\n      let colltDecimals = 18;\n\n      if (collateralIsETH) {\n        collateralBalance = new BigNumber(await getBalance(user));\n      } else {\n        const userColltBalance = await getTokenBalance(collateral, user);\n        colltDecimals = await getDecimals(collateral);\n        collateralBalance = toTokenUnitsBN(userColltBalance, colltDecimals);\n      }\n\n      const ownerTokenBalanceBN = toTokenUnitsBN(_ownerTokenBalance, decimals);\n      const userTokenBalanceBN = toTokenUnitsBN(_userTokenBalance, decimals);\n\n      const strikeValInCollt = await calculateStrikeValueInCollateral(\n        collateral,\n        strike,\n        oracle,\n      );\n      const currentRatio = calculateRatio(\n        vaultToManage.collateral,\n        vaultToManage.oTokensIssued,\n        strikePrice,\n        strikeValInCollt,\n      );\n\n      if (!isCancelled) {\n        setStrikeValue(strikeValueInCollateral);\n        setVault(vaultToManage);\n        setCollateralDecimals(colltDecimals);\n        setOwnerTokenBalance(ownerTokenBalanceBN);\n        setUserTokenBalance(userTokenBalanceBN);\n        setRatio(currentRatio);\n        setUserCollateralAssetBalance(collateralBalance);\n      }\n    }\n    updateInfo();\n    const id = setInterval(updateInfo, 10000);\n\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [\n    collateral,\n    collateralDecimals,\n    collateralIsETH,\n    decimals,\n    oracle,\n    owner,\n    strike,\n    strikePrice,\n    token,\n    user,\n    strikeValueInCollateral,\n  ]);\n\n  const isOwner = user === owner;\n\n  return noVault ? (\n    <div style={{ padding: 100, textAlign: 'center' }}> No Vault Found for this user </div>\n  ) : (\n    <>\n      <Header\n        primary={isOwner ? 'Manage Your Vault' : 'Vault Detail'}\n        secondary={\n          expiry * 1000 > Date.now() ? (\n            <Timer end={new Date(expiry * 1000)} />\n          ) : (\n            <Button onClick={() => redeem(token)} label=\"Redeem\" />\n          )\n        }\n      />\n\n      <HeaderDashboard\n        owner={owner}\n        user={user}\n        ratio={ratio}\n        minRatio={minRatio}\n        vault={vault}\n        decimals={decimals}\n        symbol={symbol}\n        newRatio={newRatio}\n        useCollateral={vaultUsesCollateral}\n        collateralIsETH={collateralIsETH}\n        collateralDecimals={collateralDecimals}\n      />\n\n      <Tabs\n        items={['Collateral Management', 'Token Issuance', 'Liquidation', 'Exercise']}\n        selected={tabSelected}\n        onChange={setTabSelected}\n      />\n\n      {tabSelected === 0 ? (\n        <CollateralManagement\n          isOwner={isOwner}\n          vault={vault}\n          collateralAssetBalance={userCollateralAssetBalance}\n          collateralAsset={option.collateral}\n          token={token}\n          owner={owner}\n          strikeValue={strikeValueInCollateral}\n          strikePrice={strikePrice}\n          minRatio={minRatio}\n          setNewRatio={setNewRatio}\n        />\n      ) : (\n        <></>\n      )}\n\n      {tabSelected === 1 ? (\n        <IssuedTokenManagement\n          isOwner={isOwner}\n          vault={vault}\n          tokenBalance={ownerTokenBalance}\n          token={token}\n          strikeValue={strikeValueInCollateral}\n          strikePrice={strikePrice}\n          minRatio={minRatio}\n          decimals={decimals}\n          symbol={symbol}\n          setNewRatio={setNewRatio}\n        />\n      ) : (\n        <></>\n      )}\n\n      {tabSelected === 2 ? (\n        vaultUsesCollateral ? (\n          <LiquidationHistory\n            userTokenBalance={userTokenBalance}\n            isOwner={isOwner}\n            owner={owner}\n            token={token}\n            tokenDecimals={decimals}\n          />\n        ) : (\n          <Box> This vault cannot be liquidated </Box>\n        )\n      ) : (\n        <></>\n      )}\n\n      {tabSelected === 3 ? (\n        <ExerciseHistory\n          owner={owner}\n          token={token}\n          tokenDecimals={decimals}\n          collateralDecimals={collateralDecimals}\n        />\n      ) : (\n        <></>\n      )}\n    </>\n  );\n}\n\nManageVault.propTypes = {\n  user: PropTypes.string.isRequired,\n};\n\nexport default ManageVault;\n","import React from 'react';\nimport BigNumber from 'bignumber.js';\nimport PropTypes from 'prop-types';\n\nimport { BalanceBlock, AddressBlock } from '../common';\n\n/**\n *\n * @param {{ poolTokenBalance: BigNumber, poolETHBalance: BigNumber }}\n */\nconst HeaderDashboard = ({\n  symbol, poolETHBalance, poolTokenBalance, uniswapExchange,\n}) => (\n  <div style={{ padding: '2%', display: 'flex', alignItems: 'center' }}>\n    <div style={{ width: '30%' }}>\n      <BalanceBlock asset=\"Total ETH Liquidity\" balance={poolETHBalance} />\n    </div>\n    <div style={{ width: '30%' }}>\n      <BalanceBlock asset={`${symbol} Liquidity`} balance={poolTokenBalance} />\n    </div>\n    <div style={{ width: '40%' }}>\n      <>\n        <AddressBlock label=\"Uniswap Contract\" address={uniswapExchange} />\n      </>\n    </div>\n  </div>\n);\n\nHeaderDashboard.propTypes = {\n  symbol: PropTypes.string.isRequired,\n  poolETHBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  poolTokenBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  uniswapExchange: PropTypes.string.isRequired,\n};\n\nexport default HeaderDashboard;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Box, TextInput, Button, IconCirclePlus, IconCircleMinus,\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport { buyOTokensFromExchange, sellOTokensFromExchange } from '../../utils/web3';\n\nimport { getPremiumToPay, getPremiumReceived } from '../../utils/infura';\n\nimport { BalanceBlock, MaxButton, PriceSection } from '../common';\nimport { toBaseUnitBN, fromWei } from '../../utils/number';\n\n/**\n *\n * @param {{\n *  decimals: number\n *  tokenBalance: BigNumber\n * }} param0\n */\nfunction OptionExchange({\n  symbol, tokenBalance, token, exchange, decimals,\n}) {\n  const [buyAmt, setBuyAmt] = useState(new BigNumber(0));\n  const [sellAmt, setSellAmt] = useState(new BigNumber(0));\n  const [premiumToPay, setPremiumToPay] = useState(new BigNumber(0));\n  const [premiumReceived, setPremiumReceived] = useState(new BigNumber(0));\n\n  const updatePremiumToPay = async (amt) => {\n    const butAmountBN = new BigNumber(amt);\n    if (butAmountBN.lte(new BigNumber(0))) {\n      setPremiumToPay(new BigNumber(0));\n      return;\n    }\n    const amount = toBaseUnitBN(butAmountBN, decimals).toString();\n    const premium = await getPremiumToPay(exchange, token, amount);\n    setPremiumToPay(new BigNumber(fromWei(premium)));\n  };\n\n  const updatePremiumReceived = async (amt) => {\n    const sellAmountBN = new BigNumber(amt);\n    if (sellAmountBN.lte(new BigNumber(0))) {\n      setPremiumReceived(new BigNumber(0));\n      return;\n    }\n    const amount = toBaseUnitBN(sellAmountBN, decimals).toString();\n    const premium = await getPremiumReceived(exchange, token, amount);\n    setPremiumReceived(new BigNumber(premium));\n  };\n\n  return (\n    <Box heading=\"Exchange\">\n      <div style={{ display: 'flex' }}>\n        {/* total Issued */}\n        <div style={{ width: '30%' }}>\n          <BalanceBlock asset={`${symbol} Balance`} balance={tokenBalance} />\n        </div>\n        {/* Buy Token from Uniswap */}\n        <div style={{ width: '32%', paddingTop: '2%' }}>\n          <div style={{ display: 'flex' }}>\n            <div style={{ width: '60%' }}>\n              <>\n                <TextInput\n                  type=\"number\"\n                  wide\n                  value={buyAmt}\n                  onChange={(event) => {\n                    if (event.target.value) {\n                      setBuyAmt(event.target.value);\n                      updatePremiumToPay(event.target.value);\n                    } else {\n                      setBuyAmt(new BigNumber(0));\n                      updatePremiumToPay(new BigNumber(0));\n                    }\n                  }}\n                />\n              </>\n            </div>\n            <div style={{ width: '40%' }}>\n              <Button\n                wide\n                icon={<IconCirclePlus />}\n                label=\"Buy\"\n                onClick={() => {\n                  buyOTokensFromExchange(\n                    token,\n                    exchange,\n                    toBaseUnitBN(buyAmt, decimals).toString(),\n                    toBaseUnitBN(premiumToPay, 18).toString(),\n                  );\n                }}\n              />\n            </div>\n          </div>\n          <PriceSection label=\"Cost:\" amt={premiumToPay} symbol=\"\" />\n        </div>\n        <div style={{ width: '6%' }} />\n        {/* Remove collateral */}\n        <div style={{ width: '32%', paddingTop: '2%' }}>\n          <div style={{ display: 'flex' }}>\n            <div style={{ width: '60%' }}>\n              <>\n                <TextInput\n                  type=\"number\"\n                  wide\n                  value={sellAmt}\n                  onChange={(event) => {\n                    if (event.target.value) {\n                      setSellAmt(event.target.value);\n                      updatePremiumReceived(event.target.value);\n                    } else {\n                      setSellAmt(new BigNumber(0));\n                      updatePremiumReceived(new BigNumber(0));\n                    }\n                  }}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setSellAmt(tokenBalance);\n                    updatePremiumReceived(tokenBalance);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{ width: '40%' }}>\n              <Button\n                wide\n                icon={<IconCircleMinus />}\n                label=\"Sell\"\n                onClick={() => {\n                  sellOTokensFromExchange(\n                    token,\n                    exchange,\n                    toBaseUnitBN(sellAmt, decimals).toString(),\n                  );\n                }}\n              />\n            </div>\n          </div>\n          <PriceSection label=\"Premium\" amt={premiumReceived} />\n        </div>\n      </div>\n    </Box>\n  );\n}\n\nOptionExchange.propTypes = {\n  symbol: PropTypes.string.isRequired,\n  tokenBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  token: PropTypes.string.isRequired,\n  exchange: PropTypes.string.isRequired,\n  decimals: PropTypes.number.isRequired,\n};\n\nexport default OptionExchange;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport BigNumber from 'bignumber.js';\nimport {\n  Box, TextInput, Button, IconCirclePlus, IconEthereum,\n} from '@aragon/ui';\nimport { addLiquidity } from '../../utils/web3';\n\nimport { BalanceBlock, MaxButton, PriceSection } from '../common';\nimport { toBaseUnitBN } from '../../utils/number';\n\n/**\n *\n * @param {{\n * poolTokenBalance: BigNumber,\n * poolETHBalance:BigNumber,\n * liquidityTokenSupply: BigNumber,\n * userTokenBalance: BigNumber,\n * userETHBalance:BigNumber\n * uniswapExchange: string\n * }} param0\n */\nfunction AddLiquidity({\n  otoken,\n  otokenSymbol,\n  otokenDecimals,\n  userTokenBalance,\n  userETHBalance,\n  uniswapExchange,\n  poolTokenBalance,\n  poolETHBalance,\n  liquidityTokenDecimals,\n  liquidityTokenSupply,\n}) {\n  const SLIPPAGE_RATE = 2;\n\n\n  const [amtETHToAdd, setAmtETHToAdd] = useState(new BigNumber(0));\n  const [amtTokenToAdd, setAmtTokenToAdd] = useState(new BigNumber(0));\n\n  const liquidityMinted = (liquidityTokenSupply.times(amtETHToAdd)).div(poolETHBalance);\n  const liquidityMintedMin = (liquidityMinted.times(new BigNumber(100 - SLIPPAGE_RATE))).div(new BigNumber(100));\n  const ethToTokenRatio = poolETHBalance.div(poolTokenBalance);\n  const tokenToEthRatio = poolTokenBalance.div(poolETHBalance);\n\n  const onChangeETHAmtToSend = (ethAmt) => {\n    if (!ethAmt) {\n      setAmtTokenToAdd(new BigNumber(0));\n      setAmtETHToAdd(new BigNumber(0));\n      return;\n    }\n\n    const newTokenAmt = (new BigNumber(ethAmt).times(tokenToEthRatio));\n    setAmtETHToAdd(new BigNumber(ethAmt));\n    setAmtTokenToAdd(newTokenAmt);\n  };\n\n  const onChangeTokenAmtToSend = (tokenAmt) => {\n    if (!tokenAmt) {\n      setAmtTokenToAdd(new BigNumber(0));\n      setAmtETHToAdd(new BigNumber(0));\n      return;\n    }\n\n    const newEthAmt = new BigNumber(tokenAmt).times(ethToTokenRatio);\n    setAmtETHToAdd(newEthAmt);\n    setAmtTokenToAdd(new BigNumber(tokenAmt));\n  };\n\n  return (\n    <Box heading=\"Add Liquidity\">\n      <div style={{ display: 'flex' }}>\n        {/* Pool Status */}\n        <div style={{ width: '30%' }}>\n          <BalanceBlock asset=\"ETH Balance\" balance={userETHBalance} />\n        </div>\n        {/* Add Liquidity too pool */}\n        <div style={{ width: '70%', paddingTop: '2%' }}>\n          <div style={{ display: 'flex' }}>\n            <div style={{ width: '35%', marginRight: '5%' }}>\n              <>\n                <TextInput\n                  adornmentPosition=\"end\"\n                  adornment={otokenSymbol}\n                  type=\"number\"\n                  wide\n                  value={amtTokenToAdd.toNumber()}\n                  onChange={(event) => {\n                    onChangeTokenAmtToSend(event.target.value);\n                  }}\n                />\n                <MaxButton\n                  onClick={() => {\n                    onChangeTokenAmtToSend(userTokenBalance);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{ width: '35%', marginRight: '5%' }}>\n              <TextInput\n                adornmentPosition=\"end\"\n                adornment={<IconEthereum />}\n                type=\"number\"\n                wide\n                value={amtETHToAdd.toNumber()}\n                onChange={(event) => {\n                  onChangeETHAmtToSend(event.target.value);\n                }}\n              />\n              <PriceSection label=\"Mint\" amt={liquidityMinted} symbol=\"Pool Tokens\" />\n            </div>\n            <div style={{ width: '30%' }}>\n              <Button\n                wide\n                icon={<IconCirclePlus />}\n                label=\"Add Liquidity\"\n                onClick={() => {\n                  const maxToken = toBaseUnitBN(amtTokenToAdd, otokenDecimals).toString();\n                  const minLiquidity = toBaseUnitBN(liquidityMintedMin, liquidityTokenDecimals).toString();\n                  const ethWei = toBaseUnitBN(amtETHToAdd, 18).toString();\n                  addLiquidity(\n                    otoken,\n                    uniswapExchange,\n                    maxToken,\n                    minLiquidity,\n                    ethWei,\n                  );\n                }}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </Box>\n  );\n}\n\nAddLiquidity.propTypes = {\n  otoken: PropTypes.string.isRequired,\n  otokenSymbol: PropTypes.string.isRequired,\n  otokenDecimals: PropTypes.number.isRequired,\n  userTokenBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  userETHBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  uniswapExchange: PropTypes.string.isRequired,\n  poolTokenBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  poolETHBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  liquidityTokenDecimals: PropTypes.number.isRequired,\n  liquidityTokenSupply: PropTypes.instanceOf(BigNumber).isRequired,\n};\n\nexport default AddLiquidity;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Box, TextInput, Button, IconCircleMinus, IconFundraising,\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport { removeLiquidity } from '../../utils/web3';\n\nimport { BalanceBlock, MaxButton, PriceSection } from '../common';\nimport { toBaseUnitBN } from '../../utils/number';\n\n/**\n *\n * @param {{\n *  otokenDecimals: number,\n *  liquidityTokenDecimals: number,\n *  otokenSymbol: string,\n *  uniswapExchange: string\n *  userliquidityTokenBalance: BigNumber\n *  poolTokenBalance: BigNumber\n *  poolETHBalance: BigNumber\n *  liquidityTokenDecimals: BigNumber\n *  liquidityTokenSupply: BigNumber\n *\n * }} param0\n */\nfunction RemoveLiquidity({\n  otokenSymbol,\n  otokenDecimals,\n  userliquidityTokenBalance,\n  uniswapExchange,\n  poolTokenBalance,\n  poolETHBalance,\n  liquidityTokenDecimals,\n  liquidityTokenSupply,\n}) {\n  const SLIPPAGE_RATE = 2;\n\n  const [amtLiquidityTokenToSell, setAmtLiquidityTokenToSell] = useState(new BigNumber(0));\n\n  const poolPortion = amtLiquidityTokenToSell.div(liquidityTokenSupply);\n  const estETHRecieved = poolETHBalance.times(poolPortion);\n  const estOTokenReceived = poolTokenBalance.times(poolPortion);\n\n  const minETHReceived = estETHRecieved.times(new BigNumber(100 - SLIPPAGE_RATE)).div(new BigNumber(100));\n  const minTokenReceived = estOTokenReceived.times(new BigNumber(100 - SLIPPAGE_RATE)).div(new BigNumber(100));\n  const onChangeTokenAmtToSend = (tokenAmt) => {\n    if (!tokenAmt) {\n      setAmtLiquidityTokenToSell(new BigNumber(0));\n      return;\n    }\n    const tokenAmtBN = new BigNumber(tokenAmt);\n    setAmtLiquidityTokenToSell(tokenAmtBN);\n  };\n\n  return (\n    <Box heading=\"Remove Liquidity\">\n      <div style={{ display: 'flex' }}>\n        {/* Pool Token in Hold */}\n        <div style={{ width: '30%' }}>\n          <BalanceBlock asset=\"Pool Token Balance\" balance={userliquidityTokenBalance} />\n        </div>\n        {/* Remove */}\n        <div style={{ width: '70%', paddingTop: '2%' }}>\n          <div style={{ display: 'flex' }}>\n            <div style={{ width: '35%', marginRight: '5%' }}>\n              <TextInput\n                adornmentPosition=\"end\"\n                adornment={<IconFundraising />}\n                type=\"number\"\n                wide\n                value={amtLiquidityTokenToSell.toNumber()}\n                onChange={(event) => {\n                  onChangeTokenAmtToSend(event.target.value);\n                }}\n              />\n              <MaxButton\n                onClick={() => setAmtLiquidityTokenToSell(userliquidityTokenBalance)}\n              />\n            </div>\n            <div style={{ width: '35%', marginRight: '5%' }}>\n              <>\n                <PriceSection label=\"You get\" amt={estETHRecieved} symbol=\"ETH\" />\n                <PriceSection label=\"+\" amt={estOTokenReceived} symbol={otokenSymbol} />\n              </>\n            </div>\n            <div style={{ width: '30%' }}>\n              <Button\n                wide\n                icon={<IconCircleMinus />}\n                label=\"Remove Liquidity\"\n                onClick={() => {\n                  const amt = toBaseUnitBN(amtLiquidityTokenToSell, liquidityTokenDecimals).toString();\n                  const min_eth = toBaseUnitBN(minETHReceived, 18).toString();\n                  const min_token = toBaseUnitBN(minTokenReceived, otokenDecimals).toString();\n\n                  removeLiquidity(\n                    uniswapExchange,\n                    amt,\n                    min_eth,\n                    min_token,\n                  );\n                }}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </Box>\n  );\n}\n\nRemoveLiquidity.propTypes = {\n  otokenSymbol: PropTypes.string.isRequired,\n  otokenDecimals: PropTypes.number.isRequired,\n  userliquidityTokenBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  uniswapExchange: PropTypes.string.isRequired,\n  poolTokenBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  poolETHBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  liquidityTokenDecimals: PropTypes.number.isRequired,\n  liquidityTokenSupply: PropTypes.instanceOf(BigNumber).isRequired,\n};\n\nexport default RemoveLiquidity;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useParams } from 'react-router-dom';\nimport { Header } from '@aragon/ui';\n\nimport BigNumber from 'bignumber.js';\nimport { getTokenBalance, getBalance, getERC20Info } from '../../utils/infura';\nimport { toTokenUnitsBN } from '../../utils/number';\n\n\nimport { options } from '../../constants/contracts';\n\nimport DashBoard from './Header';\nimport OptionExchange from './OptionExchange';\n\nimport AddLiquidity from './AddLiquidity';\nimport RemoveLiquidity from './RemoveLiquidity';\n\nfunction ManagePool({ user }) {\n  const { token } = useParams();\n\n  const option = options.find((o) => o.addr === token);\n  const {\n    uniswapExchange, decimals, symbol, exchange,\n  } = option;\n\n  const [poolTokenBalance, setPoolTokenBalance] = useState(new BigNumber(0));\n  const [userTokenBalance, setUserTokenBalance] = useState(new BigNumber(0));\n  const [poolETHBalance, setPoolETHBalance] = useState(new BigNumber(0));\n  const [userETHBalance, setUserETHBalance] = useState(new BigNumber(0));\n\n  const [userliquidityTokenBalance, setUserLiquidityTokenBalance] = useState(new BigNumber(0));\n  const [liquidityTokenSupply, setLiquidityTokenSupply] = useState(new BigNumber(0));\n  const [liquidityTokenDecimals, setLiquidityTokenDecimals] = useState(0);\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updatePoolInfo() {\n      const [exTokenBalance, exchagneETHBalance, liquidityTokenInfo] = await Promise.all([\n        getTokenBalance(token, uniswapExchange),\n        getBalance(uniswapExchange),\n        getERC20Info(uniswapExchange),\n      ]);\n      const { decimals: liqTokenDecimal, totalSupply: liqTokenTotalSupply } = liquidityTokenInfo;\n      const exchangeTokenBalance = toTokenUnitsBN(exTokenBalance, decimals);\n      if (!isCancelled) {\n        setLiquidityTokenDecimals(liqTokenDecimal);\n        setLiquidityTokenSupply(new BigNumber(liqTokenTotalSupply));\n        setPoolETHBalance(new BigNumber(exchagneETHBalance));\n        setPoolTokenBalance(exchangeTokenBalance);\n      }\n    }\n    updatePoolInfo();\n    const id = setInterval(updatePoolInfo, 15000);\n\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [decimals, token, uniswapExchange]);\n\n  useEffect(() => {\n    if (user === '') return;\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [tokenBalance, userEthBalance, liqTokenBalance] = await Promise.all([\n        getTokenBalance(token, user),\n        getBalance(user),\n        getTokenBalance(uniswapExchange, user),\n      ]);\n\n      const userOTknBalanceBN = toTokenUnitsBN(tokenBalance, decimals);\n      const userLiqTknBalanceBN = toTokenUnitsBN(liqTokenBalance, liquidityTokenDecimals);\n      if (!isCancelled) {\n        setUserLiquidityTokenBalance(userLiqTknBalanceBN);\n        setUserETHBalance(new BigNumber(userEthBalance));\n        setUserTokenBalance(userOTknBalanceBN);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [decimals, liquidityTokenDecimals, token, uniswapExchange, user]);\n\n  return (\n    <>\n      <Header primary=\"Exchange\" />\n\n      <DashBoard\n        user={user}\n        symbol={symbol}\n        poolETHBalance={poolETHBalance}\n        poolTokenBalance={poolTokenBalance}\n        uniswapExchange={uniswapExchange}\n      />\n\n      <OptionExchange\n        symbol={symbol}\n        tokenBalance={userTokenBalance}\n        token={token}\n        exchange={exchange}\n        decimals={decimals}\n      />\n\n      <Header primary=\"Provide Liquidity\" />\n\n      <AddLiquidity\n        user={user}\n        otoken={token}\n        otokenDecimals={decimals}\n        otokenSymbol={symbol}\n        userTokenBalance={userTokenBalance}\n        userliquidityTokenBalance={userliquidityTokenBalance}\n        userETHBalance={userETHBalance}\n        uniswapExchange={uniswapExchange}\n        poolETHBalance={poolETHBalance}\n        poolTokenBalance={poolTokenBalance}\n        liquidityTokenDecimals={liquidityTokenDecimals}\n        liquidityTokenSupply={liquidityTokenSupply}\n      />\n\n      <RemoveLiquidity\n        otokenDecimals={decimals}\n        otokenSymbol={symbol}\n        userliquidityTokenBalance={userliquidityTokenBalance}\n        userETHBalance={userETHBalance}\n        uniswapExchange={uniswapExchange}\n        poolETHBalance={poolETHBalance}\n        poolTokenBalance={poolTokenBalance}\n        liquidityTokenDecimals={liquidityTokenDecimals}\n        liquidityTokenSupply={liquidityTokenSupply}\n      />\n    </>\n  );\n}\n\nManagePool.propTypes = {\n  user: PropTypes.string.isRequired,\n};\n\nexport default ManagePool;\n","import React from 'react';\n\nimport { Link } from '@aragon/ui';\nimport PropTypes from 'prop-types';\n\nfunction Footer({ theme }) {\n  const style = {\n    backgroundColor: theme === 'light' ? '#F8F8F8' : '#35425e',\n    textAlign: 'center',\n    padding: '17px',\n    position: 'fixed',\n    left: '0',\n    bottom: '0',\n    height: '50px',\n    width: '100%',\n    fontSize: '12px',\n  };\n\n  return (\n    <div style={style}>\n      Powered By\n      <Link external href=\"https://opyn.co/#/\">\n        Opyn\n      </Link>\n      {', '}\n      <Link external href=\"https://ui.aragon.org/\">\n        Aragon UI\n      </Link>\n      ,\n      {', '}\n      <Link external href=\"https://www.blocknative.com/\">\n        Blocknative\n      </Link>\n      {'. '}\n      <Link external href=\"https://www.kollateral.co/\">\n        Kollateral\n      </Link>\n      {'. '}\n      Hosted on\n      <Link external href=\"https://github.com/antoncoding/opyn-liquidator\">\n        GitHub\n      </Link>\n      .\n    </div>\n  );\n}\n\nFooter.propTypes = {\n  theme: PropTypes.string.isRequired,\n};\n\nexport default Footer;\n","import React, { useState } from 'react';\n\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\nimport { Main } from '@aragon/ui';\nimport { updateModalMode } from './utils/web3';\nimport NavBar from './components/NavBar';\nimport HomePage from './components/HomePage';\nimport AllOptoins from './components/AllContracts';\nimport Trade from './components/Trade';\nimport MyVaults from './components/MyVaults';\nimport OptionPage from './components/OptionPage';\nimport ManageVault from './components/ManageVault';\nimport ManagePool from './components/ManagePool';\nimport Footer from './components/Footer';\n\nfunction App() {\n  const storedTheme = window.localStorage.getItem('theme') || 'light';\n\n  const [user, setUser] = useState(''); // the current connected user\n  const [theme, setTheme] = useState(storedTheme);\n\n  const updateTheme = (newTheme) => {\n    setTheme(newTheme);\n    updateModalMode(newTheme);\n    window.localStorage.setItem('theme', newTheme);\n  };\n\n  return (\n    <Router>\n      <Main assetsUrl={`${process.env.PUBLIC_URL}/aragon-ui/`} theme={theme}>\n        <NavBar user={user} setUser={setUser} theme={theme} updateTheme={updateTheme} />\n\n        <Switch>\n          {/* All Options */}\n          <Route path=\"/option/:token\">\n            <OptionPage user={user} />\n          </Route>\n          <Route path=\"/options/\">\n            <AllOptoins />\n          </Route>\n          {/* My Vaults */}\n          <Route path=\"/myvaults\">\n            <MyVaults user={user} />\n          </Route>\n          <Route path=\"/manage/:token/:owner\">\n            <ManageVault user={user} />\n          </Route>\n          {/* Trade */}\n          <Route path=\"/trade/:token/\"><ManagePool user={user} /></Route>\n          <Route path=\"/trade/\">\n            <Trade />\n          </Route>\n          {/* HomePage */}\n          <Route path=\"/\"><HomePage /></Route>\n        </Switch>\n        <Footer theme={theme} />\n      </Main>\n    </Router>\n  );\n}\n\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}